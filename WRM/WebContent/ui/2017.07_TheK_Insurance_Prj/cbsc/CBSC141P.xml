<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="/cm/css/all.css" type="text/css"?>
<?xml-stylesheet href="/cm/css/convert.css" type="text/css"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:w2="http://www.inswave.com/websquare" xmlns:xf="http://www.w3.org/2002/xforms">
    <head>
        <w2:type>DEFAULT</w2:type>
        <w2:buildDate/>
        <xf:model>
            <xf:instance>
                <data/>
            </xf:instance>
            <w2:dataCollection>
                <w2:dataList baseNode="list" id="DsWs_Cnt" repeatNode="map" userData2="//*/hashtable/data/LTICA14Count"/>
                <w2:dataList baseNode="list" id="DsWs_List" repeatNode="map" userData2="//*/hashtable/data/vector/data/LTICA14"/>
                <w2:dataList baseNode="list" id="DsWs_Warning" repeatNode="map" userData2="//*/WARNING"/>
            </w2:dataCollection>
            <w2:workflowCollection/>
        </xf:model>
 <script src="/cm/js/common.js"/>
 <script src="/cm/js/val_lib.js"/>
 <script src="/cm/js/util.js"/>
 <script src="/cm/js/transSub.js"/>
 <script src="/cm/js/callService.js"/>
 <script src="/cm/js/gds.js"/>
 <script src="/cm/js/wconv.js"/>
 <script src="/cm/js/convertJs/Global_Script.js"/>
 <script src="/cm/js/convertJs/comm_Webservice.js"/>
 <script src="/cm/js/convertJs/LongTerm_Script.js"/>
        <script><![CDATA[
/****************************************************************************
 * 프로그램번호   : A310_Pop
 * 프로그램명     : 장기보험 인수유의자 조회 팝업
 * 파일명         : A310_Pop.xml
 * 프로그램 내용  : 장기보험 인수유의자를 조회한다.
 * 관련 프로그램  : 
 * 작성자         : 김상운
 * 작성일         : 2010-09-09
 * 저작권         : Copyright ⓒ 2004. the K 손해보험㈜. All Right Reserved.
 * 변경내역       : 
 ****************************************************************************/
var pageSize = "5";
var pageCount = "10";
var sRgstNo = "";
var sUdrtkNotiName = "";
//---------------------------------------------------------------------------
// function 명 : lfn_Search
// 내용        : 조회버튼  이벤트 처리
//---------------------------------------------------------------------------
scwin.lfn_Search = function(obj) {
    scwin.lfn_getSelectList("1");

    // 페이징처리를 위해 전체 총데이터수를 구한다.
    gfn_MakePagingData(div1.Ds_Page, DsWs_Cnt.getCellData(0, "nCount"), pageSize, pageCount);
    Cmb_Page.setValue("1");
    if (wconv.Length(Edt_UdrtkNotiName.getValue()) > 0) {
        Edt_UdrtkNotiName.focus();
    } else if (wconv.Length(Edt_RgstNo.getValue()) > 0) {
        Edt_RgstNo.focus();
    } else {
        Edt_UdrtkNotiName.focus();
    }
};

//---------------------------------------------------------------------------
// function 명 : lfn_getSelectList
// 내용        : 리스트 조회
//---------------------------------------------------------------------------
scwin.lfn_getSelectList = function(pageNo) {
    wconv.clear(DsWs_List); //리스트 내용삭제
    SOBJ_List.WSDL = gds.gWsdlBasis; // 서비스 Obj WSDC 설정
    var MethodObj = gfn_CreateMethodObj(SOBJ_List, "com.inswave.longterm.cst.cch.task.CCA310Task", "selectList", pageSize, pageNo);
    gfn_SetParam(MethodObj, "sRgstNo", wconv.trim(Edt_RgstNo.getValue()));
    gfn_SetParam(MethodObj, "sUdrtkNotiName", wconv.trim(Edt_UdrtkNotiName.getValue()));
    var result = gfn_CallService(SOBJ_List, DOBJ_List, MethodObj);
    if (DsWs_Warning.getRowCount() != 0) {
        wprom.alert(DsWs_Warning.getCellData(0, "msg"));
        return;
    }
    if (DsWs_Cnt.getCellData(0, "nCount") == null || DsWs_Cnt.getCellData(0, "nCount") <= 0) {
        wprom.alert("조회건이 없습니다.");
    }
    util.insertColumn(DsWs_List, [
        [
            "sCheck",
            "sCheck",
            "text"
        ]
    ]);
};

//**************************************************************************************************
// 페이징 처리 - 페이지 콤보 박스
//**************************************************************************************************
scwin.Cmb_Page_OnChanged = function(obj, strCode, strText, nOldIndex, nNewIndex) {
    scwin.lfn_getSelectList(strCode);
};

//**************************************************************************************************
// 페이징 처리 - 이전 페이지 리스트
//**************************************************************************************************
scwin.Btn_PreV_OnClick = function(obj) {
    var ftVal = wconv.toNumber(Ds_Page.getCellData(Ds_Page.currow, "FILTERCD")) - 1;
    if (wconv.toNumber(maxFilterVal) < wconv.toNumber(ftVal)) {
        wprom.alert("조회의 처음입니다.");
        return;
    } else if (wconv.toNumber(ftVal) < 1) {
        wprom.alert("조회의 처음입니다.");
        return;
    }
    wconv.filter(Ds_Page, "FILTERCD=='" + ftVal + "'");
    Cmb_Page.setValue(Ds_Page.getCellData(0, "CODE"));
    scwin.lfn_getSelectList(Cmb_Page.getValue());
};

//**************************************************************************************************
// 페이징 처리 - 이전 페이지
//**************************************************************************************************
scwin.Btn_Pre_OnClick = function(obj) {
    var Idx = Cmb_Page.getValue();
    if (wconv.toNumber(Idx) - 1 < 1) {
        wprom.alert("조회의 처음입니다.");
        return;
    }
    scwin.lfn_getSelectList(wconv.toString(wconv.toNumber(Idx) - 1));
    if (Ds_Page.getCellData(Ds_Page.firstrow, "CODE") == Idx) {
        wconv.filter(Ds_Page, "FILTERCD=='" + wconv.toString(wconv.toNumber(Ds_Page.getCellData(Ds_Page.firstrow, "FILTERCD")) - 1) + "'");
        Cmb_Page.setValue(Ds_Page.getCellData(Ds_Page.getTotalRow(), "CODE"));
        /*수작업 변환 가이드 (getTotalRow)
            필터 적용이 되어있는 row의 건수는 getRowCount API를 사용합니다.*/
    } else
        Cmb_Page.setValue(wconv.toNumber(Idx) - 1);
};

//**************************************************************************************************
// 페이징 처리 - 다음 페이지
//**************************************************************************************************
scwin.Btn_Next_OnClick = function(obj) {
    var Idx = Cmb_Page.getValue();
    if (wconv.toNumber(maxPage) < wconv.toNumber(Idx) + 1) {
        wprom.alert("더이상 자료가 존재하지 않습니다");
        return;
    }
    scwin.lfn_getSelectList(wconv.toString(wconv.toNumber(Idx) + 1));
    if (Ds_Page.getCellData(Ds_Page.getTotalRow(), "CODE") == Idx
        /*수작업 변환 가이드 (getTotalRow)
            필터 적용이 되어있는 row의 건수는 getRowCount API를 사용합니다.*/
    ) {
        wconv.filter(Ds_Page, "FILTERCD=='" + wconv.toString(wconv.toNumber(Ds_Page.getCellData(Ds_Page.getTotalRow(), "FILTERCD")) + 1
            /*수작업 변환 가이드 (getTotalRow)
                    필터 적용이 되어있는 row의 건수는 getRowCount API를 사용합니다.*/
        ) + "'");
    }
    Cmb_Page.setValue(wconv.toNumber(Idx) + 1);
};

//**************************************************************************************************
// 페이징 처리 - 다음 페이지 리스트
//**************************************************************************************************
scwin.Btn_NextV_OnClick = function(obj) {
    var ftVal = wconv.toNumber(Ds_Page.getCellData(Ds_Page.currow, "FILTERCD")) + 1;
    if (wconv.toNumber(maxFilterVal) < wconv.toNumber(ftVal)) {
        wprom.alert("더이상 자료가 존재하지 않습니다");
        return;
    }
    wconv.filter(Ds_Page, "FILTERCD=='" + ftVal + "'");
    Cmb_Page.setValue(Ds_Page.getCellData(0, "CODE"));
    scwin.lfn_getSelectList(Cmb_Page.getValue());
};

//---------------------------------------------------------------------------
// function 명 : btn_close_OnClick
// 내용        : 닫기버튼 click event처리
//---------------------------------------------------------------------------
scwin.btn_close_OnClick = function(obj) {
    wconv.close(false);
};

//---------------------------------------------------------------------------
// function 명 : lfn_btn_ok_OnClick
// 내용        : 확인버튼 클릭 이벤트 
//---------------------------------------------------------------------------
scwin.lfn_btn_ok_OnClick = function(obj) {
    var nRowPos = -1;
    for (var i = 0; i < DsWs_List.getRowCount(); i++) {
        if (DsWs_List.getCellData(i, "sCheck") == "1") {
            nRowPos = i;
            break;
        }
    }
    if (nRowPos == -1) {
        wprom.alert("원하는 항목을 선택하세요");
        return;
    }
    var sRgstNo = DsWs_List.getCellData(nRowPos, "sRgstNo");
    var sUdrtkNotiName = DsWs_List.getCellData(nRowPos, "sUdrtkNotiName");
    wconv.close(sRgstNo + "^" + sUdrtkNotiName);
};

//---------------------------------------------------------------------------
// function 명 : lfn_Grd_List_OnCellClick
// 내용        :  조회화면 그리드 셀클릭 이벤트 
//---------------------------------------------------------------------------
scwin.lfn_Grd_List_OnCellClick = function(obj, nRow, nCell, nX, nY, nPivotIndex) {
    for (var i = 0; i < DsWs_List.getRowCount(); i++) {
        DsWs_List.setCellData(i, "sCheck", "0");
    }
    DsWs_List.setCellData(nRow, "sCheck", "1");
};

//---------------------------------------------------------------------------
// function 명 : lfn_Grd_List_OnCellDblClick
// 내용        :  조회화면 그리드 셀더블클릭 이벤트 
//---------------------------------------------------------------------------
scwin.lfn_Grd_List_OnCellDblClick = function(obj, nRow, nCell, nX, nY, nPivotIndex) {
    scwin.lfn_Grd_List_OnCellClick(obj, nRow, nCell, nX, nY, nPivotIndex);
    scwin.lfn_btn_ok_OnClick(obj);
};

//---------------------------------------------------------------------------
// function 명 : lfn_Edt_UdrtkNotiName_OnKeyDown
// 내용        :  입수유의자명 입력 후  엔터 이벤트
//---------------------------------------------------------------------------
scwin.lfn_Edt_UdrtkNotiName_OnKeyDown = function(obj, nChar, bShift, bCtrl, bAlt, LLParam, HLParam) {
    if (nChar == 13) {
        scwin.lfn_Search(obj);
    }
};

//---------------------------------------------------------------------------
// function 명 : lfn_Edt_RgstNo_OnKeyDown
// 내용        :  주민등록번호  입력 후  엔터 이벤트
//---------------------------------------------------------------------------
scwin.lfn_Edt_RgstNo_OnKeyDown = function(obj, nChar, bShift, bCtrl, bAlt, nLLParam, nHLParam) {
    if (nChar == 13) {
        scwin.lfn_Search(obj);
    }
};

//---------------------------------------------------------------------------
// function 명 : lfn_A310_Pop_OnLoadCompleted
// 내용        :  폼 omload 이벤트
//---------------------------------------------------------------------------
scwin.init = function() {
    Edt_UdrtkNotiName.setValue(sUdrtkNotiName);
    Edt_RgstNo.setValue(sRgstNo);
    Edt_UdrtkNotiName.focus();
};
if (!scwin.promise) {
    scwin.promise = {};
}

/*■■■■■■■■■■■■■■■■■■■■■스크립트 변환 결과■■■■■■■■■■■■■■■■■■■■■
※본 주석은 수작업 변환 참고용입니다. ★개발완료 후에는 필히 삭제해주세요.★
변환시간:  Fri Sep 01 2017 14:10:14 GMT+0900 (대한민국 표준시)
파일ID:  A310_Pop.xml

아래의 작업을 먼저 해주세요.


1. scwin.init() 함수에 아래의 글로벌 데이터리스트를 선언합니다.
--> 해당 화면에는 추가할 글로벌 변수가 없습니다. 

2. 공통.JS 파일을 include해주세요.
</xf:model>
 ***include 위치(하단에 주석처리 되어 있습니다.)***
<script><![CDATA[

예시)
</xf:model>
<script src="/cm/js/convertJs/예시입니다.js"/>
<script src="/cm/js/convertJs/예시입니다.js"/>
<script src="/cm/js/convertJs/예시입니다.js"/>
<script><![CDATA[

3. 표준에 어긋난 코딩인 경우 ✖ 으로 return 되어 있습니다. 검색으로 ✖이 나온다면 ASIS 소스를 확인해주세요.
ex) ASIS if(a = 1 and b = 2) {} ------> TOBE if (✖ = 2) {}

4. dialog함수로 팝업을 호출 할 경우에는 실제 파일이 있는 경로로 변경해주세요
ex) 현재 PROJECT_PATH_TEMP입니다. 

-호출구조-

호출구조는 모든 화면이 아닌 변환대상화면을 기준으로 분석하였습니다.
선언하지 않은 변수를 사용중이라면 caller 에서 넘겼을 가능성이 높습니다.
파일 ID는 소스의 form ID로 가정했습니다. 아래의 결과는 따로 확인해주세요.
A310_Pop.xml에서 호출 (callee ID):  
A310_Pop.xml을 호출   (caller ID):  A300
■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■*/
/****************************************************************************
 * 프로그램번호   : A310_Pop
 * 프로그램명     : 장기보험 인수유의자 조회 팝업
 * 파일명         : A310_Pop.xml
 * 프로그램 내용  : 장기보험 인수유의자를 조회한다.
 * 관련 프로그램  : 
 * 작성자         : 김상운
 * 작성일         : 2010-09-09
 * 저작권         : Copyright ⓒ 2004. the K 손해보험㈜. All Right Reserved.
 * 변경내역       : 
 ****************************************************************************/
// <script src="/cm/js/common.js"/>
// <script src="/cm/js/val_lib.js"/>
// <script src="/cm/js/util.js"/>
// <script src="/cm/js/transSub.js"/>
// <script src="/cm/js/callService.js"/>
// <script src="/cm/js/gds.js"/>
// <script src="/cm/js/convertJs/conv.js"/>
// <script src="/cm/js/convertJs/Global_Script.js"/>
// <script src="/cm/js/convertJs/comm_Webservice.js"/>
// <script src="/cm/js/convertJs/LongTerm_Script.js"/>
var pageSize = "5";

var pageCount = "10";

var sRgstNo = "";

var sUdrtkNotiName = "";

//---------------------------------------------------------------------------
// function 명 : lfn_Search
// 내용        : 조회버튼  이벤트 처리
//---------------------------------------------------------------------------
scwin.lfn_Search = function(obj) {
    scwin.lfn_getSelectList("1");

    // 페이징처리를 위해 전체 총데이터수를 구한다.
    gfn_MakePagingData(div1.Ds_Page, DsWs_Cnt.getCellData(0, "nCount"), pageSize, pageCount);
    Cmb_Page.setValue("1");
    if (wconv.Length(Edt_UdrtkNotiName.getValue()) > 0) {
        Edt_UdrtkNotiName.focus();
    } else if (wconv.Length(Edt_RgstNo.getValue()) > 0) {
        Edt_RgstNo.focus();
    } else {
        Edt_UdrtkNotiName.focus();
    }
};

//---------------------------------------------------------------------------
// function 명 : lfn_getSelectList
// 내용        : 리스트 조회
//---------------------------------------------------------------------------
scwin.lfn_getSelectList = function(pageNo) {
    wconv.clear(DsWs_List); //리스트 내용삭제
    SOBJ_List.WSDL = gds.gWsdlBasis; // 서비스 Obj WSDC 설정
    var MethodObj = gfn_CreateMethodObj(SOBJ_List, "com.inswave.longterm.cst.cch.task.CCA310Task", "selectList", pageSize, pageNo);
    gfn_SetParam(MethodObj, "sRgstNo", wconv.trim(Edt_RgstNo.getValue()));
    gfn_SetParam(MethodObj, "sUdrtkNotiName", wconv.trim(Edt_UdrtkNotiName.getValue()));
    var result = gfn_CallService(SOBJ_List, DOBJ_List, MethodObj);
    if (DsWs_Warning.getRowCount() != 0) {
        wprom.alert(DsWs_Warning.getCellData(0, "msg"));
        return;
    }
    if (DsWs_Cnt.getCellData(0, "nCount") == null || DsWs_Cnt.getCellData(0, "nCount") <= 0) {
        wprom.alert("조회건이 없습니다.");
    }
    util.insertColumn(DsWs_List, [
        [
            "sCheck",
            "sCheck",
            "text"
        ]
    ]);
};

//**************************************************************************************************
// 페이징 처리 - 페이지 콤보 박스
//**************************************************************************************************
scwin.Cmb_Page_OnChanged = function(obj, strCode, strText, nOldIndex, nNewIndex) {
    scwin.lfn_getSelectList(strCode);
};

//**************************************************************************************************
// 페이징 처리 - 이전 페이지 리스트
//**************************************************************************************************
scwin.Btn_PreV_OnClick = function(obj) {
    var ftVal = wconv.toNumber(Ds_Page.getCellData(Ds_Page.currow, "FILTERCD")) - 1;
    if (wconv.toNumber(maxFilterVal) < wconv.toNumber(ftVal)) {
        wprom.alert("조회의 처음입니다.");
        return;
    } else if (wconv.toNumber(ftVal) < 1) {
        wprom.alert("조회의 처음입니다.");
        return;
    }
    wconv.filter(Ds_Page, "FILTERCD=='" + ftVal + "'");
    Cmb_Page.setValue(Ds_Page.getCellData(0, "CODE"));
    scwin.lfn_getSelectList(Cmb_Page.getValue());
};

//**************************************************************************************************
// 페이징 처리 - 이전 페이지
//**************************************************************************************************
scwin.Btn_Pre_OnClick = function(obj) {
    var Idx = Cmb_Page.getValue();
    if (wconv.toNumber(Idx) - 1 < 1) {
        wprom.alert("조회의 처음입니다.");
        return;
    }
    scwin.lfn_getSelectList(wconv.toString(wconv.toNumber(Idx) - 1));
    if (Ds_Page.getCellData(Ds_Page.firstrow, "CODE") == Idx) {
        wconv.filter(Ds_Page, "FILTERCD=='" + wconv.toString(wconv.toNumber(Ds_Page.getCellData(Ds_Page.firstrow, "FILTERCD")) - 1) + "'");
        Cmb_Page.setValue(Ds_Page.getCellData(Ds_Page.getTotalRow(), "CODE"));
        /*수작업 변환 가이드 (getTotalRow)
            필터 적용이 되어있는 row의 건수는 getRowCount API를 사용합니다.*/
    } else
        Cmb_Page.setValue(wconv.toNumber(Idx) - 1);
};

//**************************************************************************************************
// 페이징 처리 - 다음 페이지
//**************************************************************************************************
scwin.Btn_Next_OnClick = function(obj) {
    var Idx = Cmb_Page.getValue();
    if (wconv.toNumber(maxPage) < wconv.toNumber(Idx) + 1) {
        wprom.alert("더이상 자료가 존재하지 않습니다");
        return;
    }
    scwin.lfn_getSelectList(wconv.toString(wconv.toNumber(Idx) + 1));
    if (Ds_Page.getCellData(Ds_Page.getTotalRow(), "CODE") == Idx
        /*수작업 변환 가이드 (getTotalRow)
            필터 적용이 되어있는 row의 건수는 getRowCount API를 사용합니다.*/
    ) {
        wconv.filter(Ds_Page, "FILTERCD=='" + wconv.toString(wconv.toNumber(Ds_Page.getCellData(Ds_Page.getTotalRow(), "FILTERCD")) + 1
            /*수작업 변환 가이드 (getTotalRow)
                    필터 적용이 되어있는 row의 건수는 getRowCount API를 사용합니다.*/
        ) + "'");
    }
    Cmb_Page.setValue(wconv.toNumber(Idx) + 1);
};

//**************************************************************************************************
// 페이징 처리 - 다음 페이지 리스트
//**************************************************************************************************
scwin.Btn_NextV_OnClick = function(obj) {
    var ftVal = wconv.toNumber(Ds_Page.getCellData(Ds_Page.currow, "FILTERCD")) + 1;
    if (wconv.toNumber(maxFilterVal) < wconv.toNumber(ftVal)) {
        wprom.alert("더이상 자료가 존재하지 않습니다");
        return;
    }
    wconv.filter(Ds_Page, "FILTERCD=='" + ftVal + "'");
    Cmb_Page.setValue(Ds_Page.getCellData(0, "CODE"));
    scwin.lfn_getSelectList(Cmb_Page.getValue());
};

//---------------------------------------------------------------------------
// function 명 : btn_close_OnClick
// 내용        : 닫기버튼 click event처리
//---------------------------------------------------------------------------
scwin.btn_close_OnClick = function(obj) {
    wconv.close(false);
};

//---------------------------------------------------------------------------
// function 명 : lfn_btn_ok_OnClick
// 내용        : 확인버튼 클릭 이벤트 
//---------------------------------------------------------------------------
scwin.lfn_btn_ok_OnClick = function(obj) {
    var nRowPos = -1;
    for (var i = 0; i < DsWs_List.getRowCount(); i++) {
        if (DsWs_List.getCellData(i, "sCheck") == "1") {
            nRowPos = i;
            break;
        }
    }
    if (nRowPos == -1) {
        wprom.alert("원하는 항목을 선택하세요");
        return;
    }
    var sRgstNo = DsWs_List.getCellData(nRowPos, "sRgstNo");
    var sUdrtkNotiName = DsWs_List.getCellData(nRowPos, "sUdrtkNotiName");
    wconv.close(sRgstNo + "^" + sUdrtkNotiName);
};

//---------------------------------------------------------------------------
// function 명 : lfn_Grd_List_OnCellClick
// 내용        :  조회화면 그리드 셀클릭 이벤트 
//---------------------------------------------------------------------------
scwin.lfn_Grd_List_OnCellClick = function(obj, nRow, nCell, nX, nY, nPivotIndex) {
    for (var i = 0; i < DsWs_List.getRowCount(); i++) {
        DsWs_List.setCellData(i, "sCheck", "0");
    }
    DsWs_List.setCellData(nRow, "sCheck", "1");
};

//---------------------------------------------------------------------------
// function 명 : lfn_Grd_List_OnCellDblClick
// 내용        :  조회화면 그리드 셀더블클릭 이벤트 
//---------------------------------------------------------------------------
scwin.lfn_Grd_List_OnCellDblClick = function(obj, nRow, nCell, nX, nY, nPivotIndex) {
    scwin.lfn_Grd_List_OnCellClick(obj, nRow, nCell, nX, nY, nPivotIndex);
    scwin.lfn_btn_ok_OnClick(obj);
};

//---------------------------------------------------------------------------
// function 명 : lfn_Edt_UdrtkNotiName_OnKeyDown
// 내용        :  입수유의자명 입력 후  엔터 이벤트
//---------------------------------------------------------------------------
scwin.lfn_Edt_UdrtkNotiName_OnKeyDown = function(obj, nChar, bShift, bCtrl, bAlt, LLParam, HLParam) {
    if (nChar == 13) {
        scwin.lfn_Search(obj);
    }
};

//---------------------------------------------------------------------------
// function 명 : lfn_Edt_RgstNo_OnKeyDown
// 내용        :  주민등록번호  입력 후  엔터 이벤트
//---------------------------------------------------------------------------
scwin.lfn_Edt_RgstNo_OnKeyDown = function(obj, nChar, bShift, bCtrl, bAlt, nLLParam, nHLParam) {
    if (nChar == 13) {
        scwin.lfn_Search(obj);
    }
};

//---------------------------------------------------------------------------
// function 명 : lfn_A310_Pop_OnLoadCompleted
// 내용        :  폼 omload 이벤트
//---------------------------------------------------------------------------
scwin.init = function() {
    Edt_UdrtkNotiName.setValue(sUdrtkNotiName);
    Edt_RgstNo.setValue(sRgstNo);
    Edt_UdrtkNotiName.focus();
};
if (!scwin.promise) {
    scwin.promise = {};
}

/*■■■■■■■■■■■■■■■■■■■■■스크립트 변환 결과■■■■■■■■■■■■■■■■■■■■■
※본 주석은 수작업 변환 참고용입니다. ★개발완료 후에는 필히 삭제해주세요.★
변환시간:  Fri Sep 01 2017 14:10:14 GMT+0900 (대한민국 표준시)
파일ID:  A310_Pop.xml

아래의 작업을 먼저 해주세요.


1. scwin.init() 함수에 아래의 글로벌 데이터리스트를 선언합니다.
--> 해당 화면에는 추가할 글로벌 변수가 없습니다. 

2. 공통.JS 파일을 include해주세요.
</xf:model>
 ***include 위치(하단에 주석처리 되어 있습니다.)***
<script><![CDATA[

예시)
</xf:model>
<script src="/cm/js/convertJs/예시입니다.js"/>
<script src="/cm/js/convertJs/예시입니다.js"/>
<script src="/cm/js/convertJs/예시입니다.js"/>
<script><![CDATA[

3. 표준에 어긋난 코딩인 경우 ✖ 으로 return 되어 있습니다. 검색으로 ✖이 나온다면 ASIS 소스를 확인해주세요.
ex) ASIS if(a = 1 and b = 2) {} ------> TOBE if (✖ = 2) {}

4. dialog함수로 팝업을 호출 할 경우에는 실제 파일이 있는 경로로 변경해주세요
ex) 현재 PROJECT_PATH_TEMP입니다. 

-호출구조-

호출구조는 모든 화면이 아닌 변환대상화면을 기준으로 분석하였습니다.
선언하지 않은 변수를 사용중이라면 caller 에서 넘겼을 가능성이 높습니다.
파일 ID는 소스의 form ID로 가정했습니다. 아래의 결과는 따로 확인해주세요.
A310_Pop.xml에서 호출 (callee ID):  
A310_Pop.xml을 호출   (caller ID):  A300
■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■*/
/****************************************************************************
 * 프로그램번호   : A310_Pop
 * 프로그램명     : 장기보험 인수유의자 조회 팝업
 * 파일명         : A310_Pop.xml
 * 프로그램 내용  : 장기보험 인수유의자를 조회한다.
 * 관련 프로그램  : 
 * 작성자         : 김상운
 * 작성일         : 2010-09-09
 * 저작권         : Copyright ⓒ 2004. the K 손해보험㈜. All Right Reserved.
 * 변경내역       : 
 ****************************************************************************/
// <script src="/cm/js/common.js"/>
// <script src="/cm/js/val_lib.js"/>
// <script src="/cm/js/util.js"/>
// <script src="/cm/js/transSub.js"/>
// <script src="/cm/js/callService.js"/>
// <script src="/cm/js/gds.js"/>
// <script src="/cm/js/convertJs/conv.js"/>
// <script src="/cm/js/convertJs/Global_Script.js"/>
// <script src="/cm/js/convertJs/comm_Webservice.js"/>
// <script src="/cm/js/convertJs/LongTerm_Script.js"/>
var pageSize = "5";

var pageCount = "10";

var sRgstNo = "";

var sUdrtkNotiName = "";

//---------------------------------------------------------------------------
// function 명 : lfn_Search
// 내용        : 조회버튼  이벤트 처리
//---------------------------------------------------------------------------
scwin.lfn_Search = function(obj) {
    scwin.lfn_getSelectList("1");

    // 페이징처리를 위해 전체 총데이터수를 구한다.
    gfn_MakePagingData(div1.Ds_Page, DsWs_Cnt.getCellData(0, "nCount"), pageSize, pageCount);
    Cmb_Page.setValue("1");
    if (wconv.Length(Edt_UdrtkNotiName.getValue()) > 0) {
        Edt_UdrtkNotiName.focus();
    } else if (wconv.Length(Edt_RgstNo.getValue()) > 0) {
        Edt_RgstNo.focus();
    } else {
        Edt_UdrtkNotiName.focus();
    }
};

//---------------------------------------------------------------------------
// function 명 : lfn_getSelectList
// 내용        : 리스트 조회
//---------------------------------------------------------------------------
scwin.lfn_getSelectList = function(pageNo) {
    wconv.clear(DsWs_List); //리스트 내용삭제
    SOBJ_List.WSDL = gds.gWsdlBasis; // 서비스 Obj WSDC 설정
    var MethodObj = gfn_CreateMethodObj(SOBJ_List, "com.inswave.longterm.cst.cch.task.CCA310Task", "selectList", pageSize, pageNo);
    gfn_SetParam(MethodObj, "sRgstNo", wconv.trim(Edt_RgstNo.getValue()));
    gfn_SetParam(MethodObj, "sUdrtkNotiName", wconv.trim(Edt_UdrtkNotiName.getValue()));
    var result = gfn_CallService(SOBJ_List, DOBJ_List, MethodObj);
    if (DsWs_Warning.getRowCount() != 0) {
        wprom.alert(DsWs_Warning.getCellData(0, "msg"));
        return;
    }
    if (DsWs_Cnt.getCellData(0, "nCount") == null || DsWs_Cnt.getCellData(0, "nCount") <= 0) {
        wprom.alert("조회건이 없습니다.");
    }
    util.insertColumn(DsWs_List, [
        [
            "sCheck",
            "sCheck",
            "text"
        ]
    ]);
};

//**************************************************************************************************
// 페이징 처리 - 페이지 콤보 박스
//**************************************************************************************************
scwin.Cmb_Page_OnChanged = function(obj, strCode, strText, nOldIndex, nNewIndex) {
    scwin.lfn_getSelectList(strCode);
};

//**************************************************************************************************
// 페이징 처리 - 이전 페이지 리스트
//**************************************************************************************************
scwin.Btn_PreV_OnClick = function(obj) {
    var ftVal = wconv.toNumber(Ds_Page.getCellData(Ds_Page.currow, "FILTERCD")) - 1;
    if (wconv.toNumber(maxFilterVal) < wconv.toNumber(ftVal)) {
        wprom.alert("조회의 처음입니다.");
        return;
    } else if (wconv.toNumber(ftVal) < 1) {
        wprom.alert("조회의 처음입니다.");
        return;
    }
    wconv.filter(Ds_Page, "FILTERCD=='" + ftVal + "'");
    Cmb_Page.setValue(Ds_Page.getCellData(0, "CODE"));
    scwin.lfn_getSelectList(Cmb_Page.getValue());
};

//**************************************************************************************************
// 페이징 처리 - 이전 페이지
//**************************************************************************************************
scwin.Btn_Pre_OnClick = function(obj) {
    var Idx = Cmb_Page.getValue();
    if (wconv.toNumber(Idx) - 1 < 1) {
        wprom.alert("조회의 처음입니다.");
        return;
    }
    scwin.lfn_getSelectList(wconv.toString(wconv.toNumber(Idx) - 1));
    if (Ds_Page.getCellData(Ds_Page.firstrow, "CODE") == Idx) {
        wconv.filter(Ds_Page, "FILTERCD=='" + wconv.toString(wconv.toNumber(Ds_Page.getCellData(Ds_Page.firstrow, "FILTERCD")) - 1) + "'");
        Cmb_Page.setValue(Ds_Page.getCellData(Ds_Page.getTotalRow(), "CODE"));
        /*수작업 변환 가이드 (getTotalRow)
            필터 적용이 되어있는 row의 건수는 getRowCount API를 사용합니다.*/
    } else
        Cmb_Page.setValue(wconv.toNumber(Idx) - 1);
};

//**************************************************************************************************
// 페이징 처리 - 다음 페이지
//**************************************************************************************************
scwin.Btn_Next_OnClick = function(obj) {
    var Idx = Cmb_Page.getValue();
    if (wconv.toNumber(maxPage) < wconv.toNumber(Idx) + 1) {
        wprom.alert("더이상 자료가 존재하지 않습니다");
        return;
    }
    scwin.lfn_getSelectList(wconv.toString(wconv.toNumber(Idx) + 1));
    if (Ds_Page.getCellData(Ds_Page.getTotalRow(), "CODE") == Idx
        /*수작업 변환 가이드 (getTotalRow)
            필터 적용이 되어있는 row의 건수는 getRowCount API를 사용합니다.*/
    ) {
        wconv.filter(Ds_Page, "FILTERCD=='" + wconv.toString(wconv.toNumber(Ds_Page.getCellData(Ds_Page.getTotalRow(), "FILTERCD")) + 1
            /*수작업 변환 가이드 (getTotalRow)
                    필터 적용이 되어있는 row의 건수는 getRowCount API를 사용합니다.*/
        ) + "'");
    }
    Cmb_Page.setValue(wconv.toNumber(Idx) + 1);
};

//**************************************************************************************************
// 페이징 처리 - 다음 페이지 리스트
//**************************************************************************************************
scwin.Btn_NextV_OnClick = function(obj) {
    var ftVal = wconv.toNumber(Ds_Page.getCellData(Ds_Page.currow, "FILTERCD")) + 1;
    if (wconv.toNumber(maxFilterVal) < wconv.toNumber(ftVal)) {
        wprom.alert("더이상 자료가 존재하지 않습니다");
        return;
    }
    wconv.filter(Ds_Page, "FILTERCD=='" + ftVal + "'");
    Cmb_Page.setValue(Ds_Page.getCellData(0, "CODE"));
    scwin.lfn_getSelectList(Cmb_Page.getValue());
};

//---------------------------------------------------------------------------
// function 명 : btn_close_OnClick
// 내용        : 닫기버튼 click event처리
//---------------------------------------------------------------------------
scwin.btn_close_OnClick = function(obj) {
    wconv.close(false);
};

//---------------------------------------------------------------------------
// function 명 : lfn_btn_ok_OnClick
// 내용        : 확인버튼 클릭 이벤트 
//---------------------------------------------------------------------------
scwin.lfn_btn_ok_OnClick = function(obj) {
    var nRowPos = -1;
    for (var i = 0; i < DsWs_List.getRowCount(); i++) {
        if (DsWs_List.getCellData(i, "sCheck") == "1") {
            nRowPos = i;
            break;
        }
    }
    if (nRowPos == -1) {
        wprom.alert("원하는 항목을 선택하세요");
        return;
    }
    var sRgstNo = DsWs_List.getCellData(nRowPos, "sRgstNo");
    var sUdrtkNotiName = DsWs_List.getCellData(nRowPos, "sUdrtkNotiName");
    wconv.close(sRgstNo + "^" + sUdrtkNotiName);
};

//---------------------------------------------------------------------------
// function 명 : lfn_Grd_List_OnCellClick
// 내용        :  조회화면 그리드 셀클릭 이벤트 
//---------------------------------------------------------------------------
scwin.lfn_Grd_List_OnCellClick = function(obj, nRow, nCell, nX, nY, nPivotIndex) {
    for (var i = 0; i < DsWs_List.getRowCount(); i++) {
        DsWs_List.setCellData(i, "sCheck", "0");
    }
    DsWs_List.setCellData(nRow, "sCheck", "1");
};

//---------------------------------------------------------------------------
// function 명 : lfn_Grd_List_OnCellDblClick
// 내용        :  조회화면 그리드 셀더블클릭 이벤트 
//---------------------------------------------------------------------------
scwin.lfn_Grd_List_OnCellDblClick = function(obj, nRow, nCell, nX, nY, nPivotIndex) {
    scwin.lfn_Grd_List_OnCellClick(obj, nRow, nCell, nX, nY, nPivotIndex);
    scwin.lfn_btn_ok_OnClick(obj);
};

//---------------------------------------------------------------------------
// function 명 : lfn_Edt_UdrtkNotiName_OnKeyDown
// 내용        :  입수유의자명 입력 후  엔터 이벤트
//---------------------------------------------------------------------------
scwin.lfn_Edt_UdrtkNotiName_OnKeyDown = function(obj, nChar, bShift, bCtrl, bAlt, LLParam, HLParam) {
    if (nChar == 13) {
        scwin.lfn_Search(obj);
    }
};

//---------------------------------------------------------------------------
// function 명 : lfn_Edt_RgstNo_OnKeyDown
// 내용        :  주민등록번호  입력 후  엔터 이벤트
//---------------------------------------------------------------------------
scwin.lfn_Edt_RgstNo_OnKeyDown = function(obj, nChar, bShift, bCtrl, bAlt, nLLParam, nHLParam) {
    if (nChar == 13) {
        scwin.lfn_Search(obj);
    }
};

//---------------------------------------------------------------------------
// function 명 : lfn_A310_Pop_OnLoadCompleted
// 내용        :  폼 omload 이벤트
//---------------------------------------------------------------------------
scwin.init = function() {
    Edt_UdrtkNotiName.setValue(sUdrtkNotiName);
    Edt_RgstNo.setValue(sRgstNo);
    Edt_UdrtkNotiName.focus();
};
]]></script>
    </head>
    <body>
        <xf:group class="cont_wrap layer" id="A310_Pop"
            style="position:absolute; WorkArea:true;  Ver:1.0;  PidAttrib:7;  /*height:443px;*/ left:8px; top:8px;/* width:640px;"
            userData1="장기보험 인수유의자 조회" userData2=" OnLoadCompleted:scwin.lfn_A310_Pop_OnLoadCompleted; ">
            <DataObjects>
                <DataObject/>
            </DataObjects>
            <ServiceObjects>
                <ServiceObject/>
            </ServiceObjects>
            <xf:group arcsize="6" class="search_area" id="Shape0"
                style="left:0px;top:30px;width:622px;" userData3="RoundRect"/>
            <w2:textbox id="Static5" label="장기보험 인수유의자 조회" style="position:absolute; VAlign:Middle;  height:20px; left:0px; top:0px; " tagname="" class="sub_pop_title01">
</w2:textbox>
            <w2:textbox id="Static17" label="총 건 :" style="position:absolute; VAlign:Middle;  height:20px;left:0px;top:82px; width:36px;" tagname=""/>
            <w2:textbox id="Stc_TotalCnt" label="0" ref="data:DsWs_Cnt.nCount"
                style="position:absolute; VAlign:Middle;  text-align:right; height:20px;left:38px;top:82px; width:28px;" tagname=""/>
            <w2:textbox id="Static1" label="건" style="position:absolute; VAlign:Middle;  height:20px;left:68px;top:82px; width:16px;" tagname=""/>
            <xf:trigger class="btn_Comm_Search " ev:onclick="scwin.lfn_Search" id="Button0"
                style="position:absolute; Transparent:TRUE;  ImageID:btn_Comm_Search;left:550px;top:38px;width:45px;" tabIndex="8" type="anchor">
                <xf:label><![CDATA[조회]]></xf:label>
            </xf:trigger>
            <w2:wframe id="div1" scope="true" src="Main_btn_GridControl.xml" style="position:absolute; height:20px;left:361px;top:72px; width:219px;"/>
            <xf:input class="sty_ipt_search" dataType="text" displayFormat="######-#ZZZZZZ" ev:onblur="scwin.lfn_Edt_RgstNo_OnKeyDown"
                id="Edt_RgstNo" style="position:absolute;   height:20px;left:305px;top:38px; width:124px;" tabIndex="10"/>
            <xf:switch id="switch_59" style=" ">
                <xf:case id="Default_60" style=" ">
                    <w2:gridView autoFit="allColumn" autoFitMinWidth="100" class="sty_Grid" dataList="DsWs_List"
                        ev:oncellclick="scwin.lfn_Grd_List_OnCellClick" ev:oncelldblclick="scwin.lfn_Grd_List_OnCellDblClick"
                        focusMode="row" id="Grd_List" inputType="text" readOnly="true"
                        style="position:absolute; UseDBuff:true;  ScrollCell:true;  InputPanel:FALSE;  EndLineColor:default;  border:Flat;  AutoFitEndLine:Hide;  height:341px; left:0px; right:631px;top:107px; width:622px;" tabIndex="11">
                        <w2:header>
                            <w2:row>
                                <w2:column dataType="text" id="head_id_427" inputType="text" readOnly="true" style="height:30px;"
                                    userData1="0" userData3="0" value="선택" width="30"/>
                                <w2:column dataType="text" id="head_id_428" inputType="text" readOnly="true" style="height:30px;"
                                    userData1="1" userData3="0" value="주민등록번호" width="125"/>
                                <w2:column dataType="text" id="head_id_429" inputType="text" readOnly="true" style="height:30px;"
                                    userData1="2" userData3="0" value="인수유의자명" width="162"/>
                                <w2:column dataType="text" id="head_id_430" inputType="text" readOnly="true" style="height:30px;"
                                    userData1="3" userData3="0" value="등록일" width="96"/>
                                <w2:column dataType="text" id="head_id_431" inputType="text" readOnly="true" style="height:30px;"
                                    userData1="4" userData3="0" value="수정일" width="91"/>
                                <w2:column dataType="text" id="head_id_432" inputType="text" readOnly="true" style="height:30px;"
                                    userData1="5" userData3="0" value="삭제일" width="93"/>
                            </w2:row>
                        </w2:header>
                        <w2:gBody>
                            <w2:row>
                                <w2:column dataType="text" id="sCheck" inputType="checkbox" readOnly="true"
                                    style="height:27px; dataType:checkbox; " userData1="0" userData3="0" width="30"/>
                                <w2:column dataType="text" expression="gfn_changeMask(sRgstNo, 1)" id="sRgstNo" inputType="expression"
                                    readOnly="true" style="" textAlign="center" userData1="1" userData3="0" width="125"/>
                                <w2:column dataType="text" expression="gfn_changeMask(sUdrtkNotiName, 4)" id="sUdrtkNotiName"
                                    inputType="expression" readOnly="true" style="" textAlign="center" userData1="2" userData3="0" width="162"/>
                                <w2:column dataType="text" displayFormat="####.##.##" id="sInptDate" inputType="text" readOnly="true"
                                    style="" textAlign="center" userData1="3" userData3="0" width="96"/>
                                <w2:column dataType="text" displayFormat="####.##.##" id="sMdfcDate" inputType="text" readOnly="true"
                                    style="" textAlign="center" userData1="4" userData3="0" width="91"/>
                                <w2:column dataType="text" displayFormat="####.##.##" id="sDelDate" inputType="text" readOnly="true"
                                    style="" textAlign="center" userData1="5" userData3="0" width="93"/>
                            </w2:row>
                        </w2:gBody>
                    </w2:gridView>
                </xf:case>
            </xf:switch>
            <xf:trigger class="popup_top_btn" ev:onclick="scwin.lfn_btn_ok_OnClick" id="btn_ok"
                style="position:absolute; ImageID:btn_Comm_Confirmation;  height:20px;left:523px;top:0px; width:25px;" tabIndex="13" type="anchor">
                <xf:label><![CDATA[확인]]></xf:label>
            </xf:trigger>
            <xf:trigger class="popup_top_btn" ev:onclick="scwin.btn_close_OnClick" id="btn_close"
                style="position:absolute; ImageID:btn_Comm_Close;  height:20px;left:573px;top:0px; width:25px;" tabIndex="12" type="anchor">
                <xf:label><![CDATA[닫기]]></xf:label>
            </xf:trigger>
            <w2:textbox class="" id="Static3" label="인수유의자명"
                style="position:absolute; VAlign:Middle;  text-align:right; height:20px;left:-6px;top:40px; width:92px;" tagname=""/>
            <xf:input class="sty_ipt_search" ev:onblur="scwin.lfn_Edt_UdrtkNotiName_OnKeyDown" id="Edt_UdrtkNotiName"
                style="position:absolute; ImeMode:native;    height:20px;left:93px;top:38px; width:114px;" tabIndex="15"/>
            <w2:textbox class="" id="Static0" label="주민등록번호"
                style="position:absolute; VAlign:Middle;  text-align:right; height:20px;left:206px;top:40px; width:92px;" tagname=""/>
        </xf:group>
    </body>
</html>
