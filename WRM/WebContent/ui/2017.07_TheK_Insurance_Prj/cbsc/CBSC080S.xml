<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="/cm/css/all.css" type="text/css"?>
<?xml-stylesheet href="/cm/css/convert.css" type="text/css"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:w2="http://www.inswave.com/websquare" xmlns:xf="http://www.w3.org/2002/xforms">
   	<head>
    <!-- 
        ###################################################
         파일명 : CBSC080S.xml
         프로그램명 : 예상해약환급금처리
         설 명 :  예상해약환급금처리
         작성자 : 진태만
         작성일 : 2017.10.06
 
         수정일자            수정자                  수정내용
        ==================================================
        2017.10.06        진태만          최초작성
        ###################################################
     -->
	 <w2:type>DEFAULT</w2:type>
        <w2:buildDate/>
        <xf:model>
            <xf:instance>
                <data/>
            </xf:instance>
            <w2:dataCollection>
                <w2:dataList baseNode="list" id="Ds_queryType" repeatNode="map">
                    <w2:columnInfo>
                        <w2:column dataType="text" id="sIndex" name="sIndex"/>
                        <w2:column dataType="text" id="sValue" name="sValue"/>
                    </w2:columnInfo>
                    <w2:data use="true">
                        <w2:row>
                            <sIndex/>
                            <sValue><![CDATA[- 선택 -]]></sValue>
                        </w2:row>
                        <w2:row>
                            <sIndex><![CDATA[01]]></sIndex>
                            <sValue><![CDATA[표준용어 한글명]]></sValue>
                        </w2:row>
                        <w2:row>
                            <sIndex><![CDATA[02]]></sIndex>
                            <sValue><![CDATA[표준용어 영문명]]></sValue>
                        </w2:row>
                        <w2:row>
                            <sIndex><![CDATA[03]]></sIndex>
                            <sValue><![CDATA[표준용어 정식 영문명]]></sValue>
                        </w2:row>
                    </w2:data>
                </w2:dataList>
                <w2:dataList baseNode="list" id="Ds_LinkList" repeatNode="map"/>
                <w2:dataList baseNode="list" id="Ds_LTIAX99_Save" repeatNode="map">
                    <w2:columnInfo>
                        <w2:column dataType="text" id="nId" name="nId"/>
                        <w2:column dataType="text" id="sHnglName" name="sHnglName"/>
                        <w2:column dataType="text" id="sEngName" name="sEngName"/>
                        <w2:column dataType="text" id="sFomlEngName" name="sFomlEngName"/>
                        <w2:column dataType="text" id="sLngth" name="sLngth"/>
                        <w2:column dataType="text" id="sInptDler" name="sInptDler"/>
                        <w2:column dataType="text" id="sInptDlerNm" name="sInptDlerNm"/>
                        <w2:column dataType="text" id="sInptDlerIP" name="sInptDlerIP"/>
                        <w2:column dataType="text" id="sInptDate" name="sInptDate"/>
                        <w2:column dataType="text" id="sInptHms" name="sInptHms"/>
                        <w2:column dataType="text" id="sMdfcDler" name="sMdfcDler"/>
                        <w2:column dataType="text" id="sMdfcDlerNm" name="sMdfcDlerNm"/>
                        <w2:column dataType="text" id="sMdfcDlerIP" name="sMdfcDlerIP"/>
                        <w2:column dataType="text" id="sMdfcDate" name="sMdfcDate"/>
                        <w2:column dataType="text" id="sMdfcHms" name="sMdfcHms"/>
                    </w2:columnInfo>
                </w2:dataList>
                <w2:dataList baseNode="list" id="Ds_LTIAX99_Info" repeatNode="map">
                    <w2:columnInfo>
                        <w2:column dataType="text" id="nId" name="nId"/>
                        <w2:column dataType="text" id="sHnglName" name="sHnglName"/>
                        <w2:column dataType="text" id="sEngName" name="sEngName"/>
                        <w2:column dataType="text" id="sFomlEngName" name="sFomlEngName"/>
                        <w2:column dataType="text" id="sLngth" name="sLngth"/>
                        <w2:column dataType="text" id="sInptDler" name="sInptDler"/>
                        <w2:column dataType="text" id="sInptDlerNm" name="sInptDlerNm"/>
                        <w2:column dataType="text" id="sInptDlerIP" name="sInptDlerIP"/>
                        <w2:column dataType="text" id="sInptDate" name="sInptDate"/>
                        <w2:column dataType="text" id="sInptHms" name="sInptHms"/>
                        <w2:column dataType="text" id="sMdfcDler" name="sMdfcDler"/>
                        <w2:column dataType="text" id="sMdfcDlerNm" name="sMdfcDlerNm"/>
                        <w2:column dataType="text" id="sMdfcDlerIP" name="sMdfcDlerIP"/>
                        <w2:column dataType="text" id="sMdfcDate" name="sMdfcDate"/>
                        <w2:column dataType="text" id="sMdfcHms" name="sMdfcHms"/>
                    </w2:columnInfo>
                </w2:dataList>
                <w2:dataList baseNode="list" id="DsWs_LTIAX99_SaveWarning" repeatNode="map" userData2="//*/WARNING"/>
                <w2:dataList baseNode="list" id="DsWs_LTIAX99" repeatNode="map" userData2="//*/hashtable/data/vector/data/LTIAX99"/>
                <w2:dataList baseNode="list" id="DsWs_LTIAX99_Info" repeatNode="map" userData2="//*/LTIAX99"/>
                <w2:dataList baseNode="list" id="DsWs_LTIAX99_CNT" repeatNode="map" userData2="//*/hashtable/data/LTIAX99CNT"/>
                <w2:dataList baseNode="list" id="Ds_warning" repeatNode="map" userData2="//*/WARNING"/>
                <w2:dataList baseNode="list" id="DsWs_LTIDA00" repeatNode="map" userData2="//hashtable/data[@hashkey='lTIDA00Doc']/LTIDA00"/>
            </w2:dataCollection>
            <w2:workflowCollection/>
        </xf:model>
        <script><![CDATA[
/****************************************************************************
 * 프로그램번호   : CBSC080S
 * 프로그램명     : 예상해약환급금 처리
 * 파일명         : CBSC080S.xml
 * 프로그램 내용  : 
 * 관련 프로그램  : 
 * 작성자         : 진태만
 * 작성일         : 2017-10-21
 * 저작권         : Copyright ⓒ 2004. the K 손해보험㈜. All Right Reserved.
 * 변경내역       : 
 ****************************************************************************/  
scwin.setExptRtnAmt = function(sPlanNo, sPsnGroupFlgcd, sBunsMetdDocuClsfCd, sDeleteYn) {

	console.log("[/CBSC080S.xml] [setExptRtnAmt()] ==> [예상해약환급금 처리] [TEST_01]" );  
	 
	scwin.getExptRtnAmt_Search(sPlanNo, sPsnGroupFlgcd, sBunsMetdDocuClsfCd, sDeleteYn);		// 해지환급금 조회[B200_Pop]
 
	scwin.getRenwlPrem_Search(sPlanNo, sPsnGroupFlgcd);		// 해지환급금 조회[B190_Pop]

//    var Url = gds.gLtiUrl + "/theK/jsp/setExptRtnAmt.jsp?" + "sPlanNo=" + sPlanNo + "&sPsnGroupFlgcd=" + sPsnGroupFlgcd + "&sBunsMetdDocuClsfCd=" + sBunsMetdDocuClsfCd + "&sDeleteYn=" + sDeleteYn; // - 장기보험고도화
//   	WebBrowser01.PageUrl = Url;
//    WebBrowser01.Run();
   
//    var Url2 = gds.gLtiUrl + "/theK/jsp/setRenwlPrem.jsp?" + "sPlanNo=" + sPlanNo + "&sPsnGroupFlgcd=" + sPsnGroupFlgcd + "&sBunsMetdDocuClsfCd=" + sBunsMetdDocuClsfCd; // -장기보험고도화
//    WebBrowser02.PageUrl = Url2;
//    WebBrowser02.Run();
};	

//---------------------------------------------------------------------------
// function 명 : getExptRtnAmt_Search
// 내용        : 해지환급금 조회[B200_Pop]
//---------------------------------------------------------------------------
scwin.getExptRtnAmt_Search = function(sPlanNo, sPsnGroupFlgcd, sBunsMetdDocuClsfCd, sDeleteYn) {
	console.log("[/CBSC080S.xml] [getExptRtnAmt_Search()] ==> [해지환급금 조회] [TEST_01]" );  
	
	//console.log("[/CBSC080S.xml] [getExptRtnAmt_Search()] ==> [Ds_LTIDA00_갯수_01]"+ Ds_LTIDA00.getRowCount() +"[Ds_LTIDA00]"+ WebSquare.xml.serialize(Ds_LTIDA00.getAllXML()) );  
	//console.log("[/CBSC080S.xml] [getExptRtnAmt_Search()] ==> [Ds_Pibo_갯수_01]"+ Ds_Pibo.getRowCount() +"[Ds_Pibo]"+ WebSquare.xml.serialize(Ds_Pibo.getAllXML()) );  
 
	var MethodObj = new callService("com.inswave.longterm.ssr.sst.task.DBB200Task", "getExptRtnAmtList");	// 해지환급금 조회 Obj
	MethodObj.setId("getExptRtnAmtList");	// ID 셋팅     
	MethodObj.setUrl("/contract/CBSC080SController.do");  			// 서버단 호출 URL  
	MethodObj.setParam("sPlanNo", sPlanNo);						// Param 셋팅(설계번호)
	MethodObj.setParam("sPsnGroupFlgcd", sPsnGroupFlgcd );		// Param 셋팅(개인단체구분코드)   
	MethodObj.setParam("sBunsMetdDocuClsfCd", sBunsMetdDocuClsfCd);		// Param 셋팅(업무보고서분류코드) 
	MethodObj.setParam("sDeleteYn", sDeleteYn );		// Param 셋팅(환급금테이블 삭제 여부)    
	
	MethodObj.setXPath("//*/AXR961");					// XPath(Ds_LTIDA00) 
	MethodObj.addXPath("//*/WARNING");		// XPath(DsWs_Warning)
	//MethodObj.setHashTable();   	// 전문의 앞이 hashtable로 보낼 때CBSC080S.xml]  
	MethodObj.async();		// 비동기 처리[기본(async:비동기)] 
	MethodObj.setXPathDs(); 	// XPath 전체 경로 사용할 경우
	MethodObj.send();		// 최종 전송  
	//console.log("[/CBSC080S.xml] [lfn_SearchData()] ==> [01. 해지환급금 조회, 전송_완료] [TEST_91]");
  
//	util.interfaceKey(_tranSync.result.serviceDs); 		// interface 조회 후 Data 리스트 Display
// 	
//	Ds_ExptRtnAmt.setJSON(_tranSync.getDsJson("//*/AXR961"));				// 해지환급금 정보 Ds 셋팅   
// 	DsWs_Warning.setJSON(_tranSync.getDsJson("//*/WARNING"));  		// Warning DS 셋팅(조회 결과)     
// 	console.log("[/CBSC080S.xml] [lfn_Search()] ==> [Ds_ExptRtnAmt_갯수]"+ Ds_ExptRtnAmt.getRowCount() +"[Ds_ExptRtnAmt]"+ WebSquare.xml.serialize(Ds_ExptRtnAmt.getAllXML()) );  
// 		
//  	if (DsWs_Warning.getRowCount() != 0) {
//        wprom.alert(DsWs_Warning.getCellData(0, "msg"));
//        return;
//    } 
	console.log("[/CBSC080S.xml] [lfn_Search()] ==> [해지환급금 조회] [TEST_end]" ); 	 
};

//---------------------------------------------------------------------------
// function 명 : getRenwlPrem_Search
// 내용        : 해지환급금 조회[B190_Pop]
//---------------------------------------------------------------------------
scwin.getRenwlPrem_Search = function(sPlanNo, sPsnGroupFlgcd) {
	console.log("[/CBSC080S.xml] [getRenwlPrem_Search()] ==> [해지환급금 조회] [TEST_01]" );  
 
	//console.log("[/CBSC080S.xml] [getRenwlPrem_Search()] ==> [Ds_LTIDA00_갯수_01]"+ Ds_LTIDA00.getRowCount() +"[Ds_LTIDA00]"+ WebSquare.xml.serialize(Ds_LTIDA00.getAllXML()) );  
	//console.log("[/CBSC080S.xml] [getRenwlPrem_Search()] ==> [Ds_Pibo_갯수_01]"+ Ds_Pibo.getRowCount() +"[Ds_Pibo]"+ WebSquare.xml.serialize(Ds_Pibo.getAllXML()) );  
   	
	var MethodObj = new callService("com.inswave.longterm.ssr.sst.task.DBB190Task", "getRenwlPremList");	// 해지환급금 조회 Obj
	MethodObj.setId("getRenwlPremList");	// ID 셋팅      
	MethodObj.setUrl("/contract/CBSC080SController.do");  		// 서버단 호출 URL 	 
	MethodObj.setParam("sPlanNo", sPlanNo);						// Param 셋팅(설계번호)
	MethodObj.setParam("sPsnGroupFlgcd", sPsnGroupFlgcd );		// Param 셋팅(개인단체구분코드)    s): A, I, U, R 
	MethodObj.setXPath("//*/LTIDA19");					// XPath(Ds_LTIDA00) 
	MethodObj.addXPath("//*/WARNING");		// XPath(DsWs_Warning)
	//MethodObj.setHashTable();   	// 전문의 앞이 hashtable로 보낼 때
	MethodObj.async();		// 비동기 처리[기본(async:비동기)] 
	MethodObj.setXPathDs(); 	// XPath 전체 경로 사용할 경우
	MethodObj.send();		// 최종 전송  
	//console.log("[/CBSC080S.xml] [getRenwlPrem_SearchData()] ==> [01. 해지환급금 조회, 전송_완료] [TEST_91]");
  
//	util.interfaceKey(_tranSync.result.serviceDs); 		// interface 조회 후 Data 리스트 Display
// 	
//	Ds_RenwlPrem.setJSON(_tranSync.getDsJson("//*/LTIDA19"));				// 해지환급금 정보 Ds 셋팅   
// 	DsWs_Warning.setJSON(_tranSync.getDsJson("//*/WARNING"));  		// Warning DS 셋팅(조회 결과)     
// 	console.log("[/CBSC080S.xml] [getRenwlPrem_Search()] ==> [Ds_RenwlPrem_갯수]"+ Ds_RenwlPrem.getRowCount() +"[Ds_RenwlPrem]"+ WebSquare.xml.serialize(Ds_RenwlPrem.getAllXML()) );  
// 		
//  	if (DsWs_Warning.getRowCount() != 0) {
//        wprom.alert(DsWs_Warning.getCellData(0, "msg"));
//        return;
//    }
    
	console.log("[/CBSC080S.xml] [getRenwlPrem_Search()] ==> [해지환급금 조회] [TEST_end]" ); 	 
};]]></script>
    </head>
    <body>
        <xf:group class="cont_wrap" id="R990"
            style="position:absolute; WorkArea:true;  Ver:1.0;  PidAttrib:7;  height:8px; left:0px; top:0px; width:8px;" userData1="예상해약환급금처리">
            <DataObjects>
                <DataObject/>
                <DataObject/>
                <DataObject/>
                <DataObject/>
            </DataObjects>
            <ServiceObjects>
                <ServiceObject/>
                <ServiceObject/>
                <ServiceObject/>
                <ServiceObject/>
            </ServiceObjects>
<!--            <WebBrowser id="WebBrowser01" style="position:absolute;   height:8px; width:8px;" tabIndex="1"/>-->
<!--            <WebBrowser id="WebBrowser02" style="position:absolute;   height:8px; width:8px;" tabIndex="1"/>-->
        </xf:group>
    </body>
</html>
