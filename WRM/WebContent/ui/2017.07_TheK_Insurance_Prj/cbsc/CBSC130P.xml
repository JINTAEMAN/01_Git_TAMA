<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="/cm/css/all.css" type="text/css"?>
<?xml-stylesheet href="/cm/css/convert.css" type="text/css"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:w2="http://www.inswave.com/websquare" xmlns:xf="http://www.w3.org/2002/xforms">
    <head>
        <w2:type>DEFAULT</w2:type>
        <w2:buildDate/>
        <xf:model>
            <xf:instance>
                <data/>
            </xf:instance>
            <w2:dataCollection>
            	<w2:dataList baseNode="list" id="Ds_List"
            		repeatNode="map">
            		<w2:columnInfo>
            			<w2:column id="col1" name="name1"
            				dataType="text">
            			</w2:column>
            		</w2:columnInfo>
            	</w2:dataList>
            	<w2:dataList baseNode="list" id="DsWs_DataWarning"
            		repeatNode="map" userData2="//*/WARNING">
            		<w2:columnInfo>
            		</w2:columnInfo>
            	</w2:dataList>
            	<w2:dataList baseNode="list" id="DsWs_List"
            		repeatNode="map" userData2="//*/GAG031" />
            	<w2:dataList id="WARNING" baseNode="list"
            		saveRemovedData="true" repeatNode="map">
            		<w2:columnInfo>
            			<w2:column id="msg" name="name1"
            				dataType="text">
            			</w2:column>
            			<w2:column id="level" name="name2"
            				dataType="text">
            			</w2:column>
            			<w2:column id="detail" name="name3"
            				dataType="text">
            			</w2:column>
            			<w2:column id="timestamp" name="name4"
            				dataType="text">
            			</w2:column>
            		</w2:columnInfo>
            	</w2:dataList>
            </w2:dataCollection>
            <w2:workflowCollection/>
        </xf:model>
        	  <script src="/cm/js/convertJs/Global_Script.js"/>
  <script src="/cm/js/convertJs/comm_Webservice.js"/>
  <script src="/cm/js/convertJs/NewGen_Script.js"/>
  <script src="/cm/js/convertJs/LongTerm_Script.js"/>
        <script><![CDATA[
/****************************************************************************
 * 프로그램번호   : D020_Pop
 * 프로그램명     : 해지환급금 내역
 * 파일명         : D020_POP.xml
 * 프로그램 내용  : 해지환급금 조회
 * 관련 프로그램  : 
 * 작성자         : 정한진
 * 작성일         : 2015-08-26
 * 저작권         : Copyright ⓒ 2004. the K 손해보험㈜. All Right Reserved.
 * 변경내역       : 
 ****************************************************************************/
// <script src="/cm/js/common.js"/>
// <script src="/cm/js/val_lib.js"/>
// <script src="/cm/js/util.js"/>
// <script src="/cm/js/transSub.js"/>
// <script src="/cm/js/callService.js"/>
// <script src="/cm/js/gds.js"/>
// <script src="/cm/js/convertJs/conv.js"/>
// <script src="/cm/js/convertJs/Global_Script.js"/>
// <script src="/cm/js/convertJs/comm_Webservice.js"/>
// <script src="/cm/js/convertJs/LongTerm_Script.js"/>
// <script src="/cm/js/convertJs/NewGen_Script.js"/>
// <script src="/cm/js/convertJs/GrdPassword_Script.js"/>
//---------------------------------------------------------------------------
// function 명 : lfn_OnLoadCompleted
// 내용        : 폼로드할때 처리할 내용
//---------------------------------------------------------------------------
var sCrNo ;
var sStndDate;
var  pageSize = "";
var  pageNo = "";
var fv_args;


scwin.init = function() {

var pro = Promise.resolve();

window.top.util.winTopShowModalChk = "T";
util.winTopShowModal();

 

pro = pro.then(function(rv) {
    return util.winTopShowModalPromise();
});

 

pro = pro.then(function(rv) {

     //init 부분 함수 입력하는곳

 
	wprom.windowOpenInit(D020_Pop);
	var indata = $w.getParameter("param");
	try {
			fv_args = JSON.parse(indata);
			console.log(fv_args);
	
		    if (wconv.length(fv_args.sCrNo) > 0) {
		        sCrNo = fv_args.sCrNo;
		    }
		     if (wconv.length(fv_args.sStndDate) > 0) {
		        sStndDate=fv_args.sStndDate;
		        }
	} catch(e) {
	};
		
    date.setValue(sStndDate);
    scwin.lfn_Search();
//    MaskEdit2.setValue( "12.21" );
	//숨김
	MaskEdit1.hide();
	MaskEdit2.hide();
	MaskEdit3.hide();
	MaskEdit4.hide();
	Static1.hide();
	Static2.hide();
	Static3.hide();
	Static4.hide();
	Static8.hide();
	Static9.hide();
	Static10.hide();
	Static12.hide();
	cell1.hide();
	cell2.hide();
	cell3.hide();
	cell4.hide();

    //init 함수를 종료하고자 할때 사용한다.
//    return Promise.reject("오류관련처리");
});


pro = pro.then(function(rv) {
    util.winTopHideModal();
});

 

pro = pro.catch(function(rj) {
    util.winTopHideModal();
    //alert(rj); //Promise reject 시 처리 "오류관련처리" 값출력
});

 

return pro;
};

//---------------------------------------------------------------------------
// function 명 : lfn_Search
// 내용        : 조회
//---------------------------------------------------------------------------
//비동기 방식 호출
scwin.lfn_Search_Async = function(e) { //완료
    util.eventAsyncCall(this, scwin.lfn_Search, arguments);
};

scwin.lfn_Search = function(e) {

    wconv.clear(Ds_List);
    wconv.clear(DsWs_List);
    wconv.clear(DsWs_DataWarning);
  
//    SOBJ_Search.WSDL = gds.gWsdlBasis;
//    var MethodObj = gfn_CreateMethodObj(SOBJ_Search, "com.inswave.longterm.pay.pdg.task.GAG031Task", "selectSvCnclEndRtnAmtForWeb", "", "");

//    wconv.trace("sCrNo ==>  " + fv_args.sCrNo);
//    wconv.trace("sStndDate ==> " + sStndDate);
    
//    gfn_SetParam(MethodObj, "sCrNo", sCrNo);
//    gfn_SetParam(MethodObj, "sDmndDate", sStndDate);  
    var MethodObj = new callService("com.inswave.longterm.pay.pdg.task.GAG031Task", "selectSvCnclEndRtnAmtForWeb", pageSize, pageNo);
	
	MethodObj.setId("selectSvCnclEndRtnAmtForWeb");
	MethodObj.setParam( "sCrNo", sCrNo);
	MethodObj.setParam( "sStndDate", sStndDate);
	MethodObj.setUrl("/contract/CBSC130PController.do");//배포후변경할것(controller위치와 이름)
	MethodObj.setXPath("//*/GAG031");
	MethodObj.addXPath("//*/WARNING"); 
	MethodObj.sync();
	MethodObj.send();
	
	util.jSonDsCreate(_tranSync.getDsJson("GAG031"), "DsWs_List");
	util.jSonDsCreate(_tranSync.getDsJson("DataWarning"), "DsWs_DataWarning");
	util.setCompBindRefresh("DsWs_List");//바인딩을 해줌
	util.setCompBindRefresh("DsWs_DataWarning");//바인딩을 해줌
	util.setRowPosition(DsWs_List, 0);	
    
	
//    var result = gfn_CallService(SOBJ_Search, DOBJ_DataSearch, MethodObj);

    if (DsWs_DataWarning.getRowCount() != 0) {
        wprom.alert(DsWs_DataWarning.getCellData(0, "msg"));
        return;
    }

//    wconv.copy(Ds_List, "DsWs_List");
    util.copyM(Ds_List, DsWs_List.getAllJSON());
    util.setCompBindRefresh("Ds_List");//바인딩을 해줌
	util.setRowPosition(Ds_List, 0);	
    	
};

//---------------------------------------------------------------------------
// function 명 : lfn_close
// 내용        : 팝업 클로즈
//---------------------------------------------------------------------------
scwin.lfn_close = function() {
    wprom.close();
};
]]></script>
    </head>
    <body>
        <xf:group class="cont_wrap layer" id="D020_Pop"
            style="position:absolute;top:0px;left:0px;min-width: 100px;"
            userData1="해지환급금 내역" userData2=" OnLoadCompleted:scwin.lfn_OnLoadCompleted; ">
            <DataObjects>
                <DataObject/>
            </DataObjects>
            <ServiceObjects>
                <ServiceObject/>
            </ServiceObjects>
            <w2:textbox id="Static5" label="해지환급금 내역" style="position:absolute; VAlign:Middle;  height:20px; left:0px; top:0px; " tagname="" class="sub_pop_title01">
</w2:textbox>
            <xf:group arcsize="8" class="sty_area_form" id="Shape0" style="position:absolute; right:628px;    border-color:user23;  bottom:136px; height:101px;left:0px;top:30px; width:251px;" userData3="RoundRect">
				<xf:group class="form_w_line" id="" style="top:24px;" />
				<xf:group class="form_w_line" id="" style="top:49px;" />
				<xf:group class="form_w_line" id="" style="top:74px;" />
				<xf:group class="form_w_line" id="cell1" style="top:99px;" />
				<xf:group class="form_w_line" id="cell2" style="top:124px;" />
				<xf:group class="form_w_line" id="cell3" style="top:149px;" />
				<xf:group class="form_w_line" id="cell4" style="top:174px;" />
			</xf:group>
            
            <xf:trigger class="popup_top_btn" ev:onclick="scwin.lfn_close" id="btn_close"
                style="position:absolute; Transparent:TRUE;  ImageID:btn_Comm_Close;  height:20px;top:0px; width:25px;float: right;left: 203px;" tabIndex="3" type="anchor">
                <xf:label><![CDATA[닫기]]></xf:label>
            </xf:trigger>
            <w2:textbox class="sty_lb_Basic" id="Static11" label="기준일자"
                style="position:absolute; VAlign:Middle;  border-style:solid;   height:24px;left:0px;top:30px; width:93px;" tagname=""/>
            <w2:textbox class="sty_lb_Basic" id="Static0" label="납입보험료"
                style="position:absolute; VAlign:Middle;  border-style:solid;   height:24px;left:0px;top:55px; width:93px;" tagname=""/>
            <w2:textbox class="sty_lb_Basic" id="Static1" label="사업비"
                style="position:absolute; VAlign:Middle;  border-style:solid;   height:24px;left:0px;top:130px; width:93px;" tagname=""/>
            <w2:textbox class="sty_lb_Basic" id="Static2" label="사업비율"
                style="position:absolute; VAlign:Middle;  border-style:solid;   height:24px;left:0px;top:155px; width:93px;" tagname=""/>
            <w2:textbox class="sty_lb_Basic" id="Static3" label="위험보험료"
                style="position:absolute; VAlign:Middle;  border-style:solid;   height:24px;left:0px;top:180px; width:93px;" tagname=""/>
            <w2:textbox class="sty_lb_Basic" id="Static4" label="저축보험료"
                style="position:absolute; VAlign:Middle;  border-style:solid;   height:24px;left:0px;top:205px; width:93px;" tagname=""/>
            <w2:textbox class="sty_lb_Basic" id="Static7" label="해지환급금액"
                style="position:absolute; VAlign:Middle;  border-style:solid;   height:24px;left:0px;top:80px; width:93px;" tagname=""/>
            <w2:textbox id="Static18" label="%"
                style="position:absolute; VAlign:Middle;   height:22px;left:216px;top:108px; width:20px;" tagname=""/>
            <w2:textbox id="Static8" label="%"
                style="position:absolute; VAlign:Middle;   height:22px;left:216px;top:158px; width:20px;" tagname=""/>
            <w2:textbox id="Static35" label="원"
                style="position:absolute; VAlign:Middle;   height:22px;left:216px;top:58px; width:23px;" tagname=""/>
            <w2:textbox id="Static9" label="원"
                style="position:absolute; VAlign:Middle;   height:22px;left:216px;top:133px; width:23px;" tagname=""/>
            <w2:textbox id="Static10" label="원"
                style="position:absolute; VAlign:Middle;   height:22px;left:216px;top:183px; width:23px;" tagname=""/>
            <w2:textbox id="Static12" label="원"
                style="position:absolute; VAlign:Middle;   height:22px;left:216px;top:208px; width:23px;" tagname=""/>
            <w2:textbox id="Static13" label="원"
                style="position:absolute; VAlign:Middle;   height:22px;left:216px;top:83px; width:23px;" tagname=""/>
            <xf:input class="sty_ipt_search" dataType="number" disabled="true" displayFormat="#,###" id="Msk_PaidPrm" placeholder=""
                ref="data:Ds_List.nTotPaymPrem"
                style="position:absolute;     border-style:solid;  height:20px;left:115px;top:58px; width:96px;text-align: right;" tabIndex="18"/>
            <xf:input class="sty_ipt_search" dataType="text" disabled="true" displayFormat="####-##-##" id="date"
                style="position:absolute;   border-style:solid;  height:20px;left:115px;top:33px; width:96px;text-align: right;" tabIndex="19"/>
            <xf:input class="sty_ipt_search" dataType="number" disabled="true" displayFormat="#,###" id="MaskEdit1"
                ref="data:Ds_List.nActTotBscs"
                style="position:absolute;     border-style:solid;  height:20px;left:115px;top:133px; width:96px;text-align: right;" tabIndex="20"/>
            <xf:input class="sty_ipt_search" dataType="number" disabled="true" displayFormat="#,###.0#" id="MaskEdit2" 
                ref="data:Ds_List.nActBscsRt"
                style="position:absolute;     border-style:solid;  height:20px;left:115px;top:158px; width:96px;text-align: right;" tabIndex="21" initValue="" displayFormatter=""/>
            <xf:input class="sty_ipt_search" dataType="number" disabled="true" displayFormat="#,###" id="MaskEdit3"
                ref="data:Ds_List.nActTotRiskPrem"
                style="position:absolute;     border-style:solid;  height:20px;left:115px;top:183px; width:96px;text-align: right;" tabIndex="22"/>
            <xf:input class="sty_ipt_search" dataType="number" disabled="true" displayFormat="#,###" id="MaskEdit4"
                ref="data:Ds_List.nActTotSvPrem"
                style="position:absolute;     border-style:solid;  height:20px;left:115px;top:208px; width:96px;text-align: right;" tabIndex="23"/>
            <xf:input class="sty_ipt_search" dataType="number" disabled="true" displayFormat="#,###" id="MaskEdit6"
                ref="data:Ds_List.nRealPymAmt"
                style="position:absolute;     border-style:solid;  height:20px;left:115px;top:83px; width:96px;text-align: right;" tabIndex="24"/>
            <w2:textbox class="sty_lb_Basic" id="Static6" label="환급율"
                style="position:absolute; VAlign:Middle;  border-style:solid;   height:24px;left:0px;top:105px; width:93px;" tagname=""/>
            <xf:input class="sty_ipt_search" dataType="number" disabled="true" displayFormat="#,###.0#" id="MaskEdit5" ref="data:Ds_List.nRtnRt"
                style="position:absolute;     border-style:solid;  height:20px;left:115px;top:108px; width:96px;text-align: right;" tabIndex="26" initValue=""/>
        </xf:group>
    </body>
</html>
