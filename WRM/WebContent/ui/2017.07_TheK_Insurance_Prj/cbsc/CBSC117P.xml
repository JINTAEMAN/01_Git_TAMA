<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="/cm/css/all.css" type="text/css"?>
<?xml-stylesheet href="/cm/css/convert.css" type="text/css"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:w2="http://www.inswave.com/websquare" xmlns:xf="http://www.w3.org/2002/xforms">
    <head>
    <!-- 
        ###################################################
         파일명 : CBSC117P.xml
         프로그램명 : 신체손해배상책임, 풍수재손해 특약상세입력
         설 명 :  신체손해배상책임, 풍수재손해 특약상세입력
         작성자 : 진태만
         작성일 : 2017.09.29
 
         수정일자            수정자                  수정내용
        ==================================================
        2017.09.29        진태만          최초작성
        ###################################################
     -->
	 <w2:type>DEFAULT</w2:type>
        <w2:buildDate/>
        <xf:model>
            <xf:instance>
                <data/>
            </xf:instance>
            <w2:dataCollection>
            
       			<!-- 특수물건유형 정보 Ds(Ds_sExtraObjType)  -->	
				<w2:dataList id="Ds_sExtraObjType" baseNode="list" saveRemovedData="true" repeatNode="map">
            		<w2:columnInfo>
						<w2:column id="sObjCode" name="유형코드" dataType="text"/>
						<w2:column id="sObjDescr" name="유형명" dataType="text"/>
            			<w2:column id="nBasicRate" name="name1" dataType="text"/>
            			<w2:column id="sObjType" name="name2" dataType="text"/>
            			<w2:column id="sApplyTodt" name="name3" dataType="text"/>
            			<w2:column id="sRiskClass" name="name4" dataType="text"/>            		 
            			<w2:column id="sBidClass" name="name6" dataType="text"/>            			 
            			<w2:column id="sInsType" name="name8" dataType="text"/>
            			<w2:column id="sApplyFmdt" name="name9" dataType="text"/>
            			<w2:column id="sDetailCode" name="name10" dataType="text"/>
            		</w2:columnInfo>
            	</w2:dataList>

            	<w2:dataList baseNode="list" id="Ds_EmplSubCvrgeInsYn"
            		repeatNode="map">
            		<w2:columnInfo>
            			<w2:column dataType="text" id="sCdType"
            				name="sCdType" />
            			<w2:column dataType="text" id="sCdTypeName"
            				name="sCdTypeName" />
            			<w2:column dataType="text" id="sCd" name="sCd" />
            			<w2:column dataType="text" id="sHnglCdName"
            				name="sHnglCdName" />
            			<w2:column dataType="text" id="sEngCdName"
            				name="sEngCdName" />
            		</w2:columnInfo>
            		<w2:data use="true">
            			<w2:row>
            				<sCd><![CDATA[Y]]></sCd>
            				<sCdType><![CDATA[EmplSubCvrgeInsYn]]></sCdType>
            				<sCdTypeName><![CDATA[종업원부담보가입여부]]></sCdTypeName>
            				<sEngCdName><![CDATA[Yes]]></sEngCdName>
            				<sHnglCdName><![CDATA[예]]></sHnglCdName>
            			</w2:row>
            			<w2:row>
            				<sCd><![CDATA[N]]></sCd>
            				<sCdType><![CDATA[EmplSubCvrgeInsYn]]></sCdType>
            				<sCdTypeName><![CDATA[종업원부담보가입여부]]></sCdTypeName>
            				<sEngCdName><![CDATA[No]]></sEngCdName>
            				<sHnglCdName><![CDATA[아니오]]></sHnglCdName>
            			</w2:row>
            		</w2:data>
            	</w2:dataList>

            	<!--            	<w2:dataList baseNode="list" id="Ds_sExtraObjType"-->
            	<!--            		repeatNode="map" />-->
            	<w2:dataList baseNode="list" id="DsWs_SpclBuldgFlagCd"
            		repeatNode="map"
            		userData2="//*/hashtable/data/vector/data" />
            	<w2:dataList baseNode="list" id="DsWs_sExtraObjType"
            		repeatNode="map" userData2="//*/vector/data/GENMB11" />

            	<!-- 특수건물구분코드 Ds -->
            	<w2:dataList id="Ds_SpclBuldgFlagCd" baseNode="list" saveRemovedData="true" repeatNode="map">
            		<w2:columnInfo>
            			<w2:column id="sCd" name="" dataType="text"/>
            			<w2:column id="sCdType" name="" dataType="text"/>
            			<w2:column id="sHnglCdName"  name=""  dataType="text"/> 
            		</w2:columnInfo>
            	</w2:dataList>

            	<!-- 피보험 목적물 적용 정보 Ds  -->
            	<w2:dataList id="Ds_Prprt_Appl" baseNode="list"
            		saveRemovedData="true" repeatNode="map">
            		<w2:columnInfo>
            			<w2:column id="sPlanNo" name="name1"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nInsrdObjctSeqno" name="name2"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nCrChngNo" name="name3"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInsBntpCd" name="name4"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInsBntpCdMcls" name="name5"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInsBntpObjtFlagCd" name="name6"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sRatoBntpCd" name="name7"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sRatoBntpCdMcls" name="name8"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sRatoBntpObjtFlagCd" name="name9"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sPoleTypeCd" name="name10"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sExtrnWlTypeCd" name="name11"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sRoofTypeCd" name="name12"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sBuldgStrtGradCd" name="name13"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sBuldgStrtGradCdNm" name="name14"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nInsArea" name="name15"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nBuldgGrodFlct" name="name16"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nBuldgUndgFlct" name="name17"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sObjctGrodUndgFlagCd"
            				name="name18" dataType="text">
            			</w2:column>
            			<w2:column id="nObjctRelvFlct" name="name19"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sSpclBuldgFlagCd" name="name20"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sSpclBuldgNo" name="name21"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sSpclBuldgTypeCd" name="name22"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sEmplSubCvrgeInsYn" name="name23"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sEqmtOwnRprtnBntpCd"
            				name="name24" dataType="text">
            			</w2:column>
            			<w2:column id="sEqmtScal" name="name25"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sSchlMngrRprtnBntpCd"
            				name="name26" dataType="text">
            			</w2:column>
            			<w2:column id="nStuNum" name="name27"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sParkEqmtFlagCd" name="name28"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nPrkLtArea" name="name29"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nParkAvaCarNum" name="name30"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nPrkLtMachNum" name="name31"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sFoodRprtnBntpCd" name="name32"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nBfyySaleAmt" name="name33"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sGasRprtnBntpCd" name="name34"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sGasRprtnAreaFlagCd"
            				name="name35" dataType="text">
            			</w2:column>
            			<w2:column id="sGasEqmtCpctFlagCd" name="name36"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sCityGasUseFlagCd" name="name37"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sGasEqmtUndgLctnYn" name="name38"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sAgreRestTermCd" name="name39"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sOwnrFlagCd" name="name40"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sOwnrDscrNo" name="name41"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sOwnrNm" name="name42"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sCrtorReln" name="name43"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sAccptPlac" name="name44"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sPaymTermCd" name="name45"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nRealPaymTerm" name="name46"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInsurTermCd" name="name47"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nRealInsurTerm" name="name48"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInsrdObjctStatCd" name="name49"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInsurStrtdate" name="name50"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInsurEndDate" name="name51"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sCnclExtnEndDate" name="name52"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sApplPlanCd" name="name53"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sApplPlanName" name="name54"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInptDler" name="name55"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInptDlerIP" name="name56"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInptDate" name="name57"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInptHms" name="name58"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sMdfcDler" name="name59"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sMdfcDlerIP" name="name60"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sMdfcDate" name="name61"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sMdfcHms" name="name62"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nGrntPrem" name="name63"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sel1" name="name64"
            				dataType="text">
            			</w2:column>
            		</w2:columnInfo>
            	</w2:dataList>

            	<!-- 피보험 목적물 정보 Ds  -->
            	<w2:dataList id="Ds_Prprt" baseNode="list"
            		saveRemovedData="true" repeatNode="map">
            		<w2:columnInfo>
            			<w2:column id="sPlanNo" name="name1"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nInsrdObjctSeqno" name="name2"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nCrChngNo" name="name3"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInsBntpCd" name="name4"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInsBntpCdMcls" name="name5"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInsBntpObjtFlagCd" name="name6"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sRatoBntpCd" name="name7"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sRatoBntpCdMcls" name="name8"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sRatoBntpObjtFlagCd" name="name9"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sPoleTypeCd" name="name10"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sExtrnWlTypeCd" name="name11"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sRoofTypeCd" name="name12"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sBuldgStrtGradCd" name="name13"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sBuldgStrtGradCdNm" name="name14"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nInsArea" name="name15"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nBuldgGrodFlct" name="name16"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nBuldgUndgFlct" name="name17"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sObjctGrodUndgFlagCd"
            				name="name18" dataType="text">
            			</w2:column>
            			<w2:column id="nObjctRelvFlct" name="name19"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sSpclBuldgFlagCd" name="name20"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sSpclBuldgNo" name="name21"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sSpclBuldgTypeCd" name="name22"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sEmplSubCvrgeInsYn" name="name23"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sEqmtOwnRprtnBntpCd"
            				name="name24" dataType="text">
            			</w2:column>
            			<w2:column id="sEqmtScal" name="name25"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sSchlMngrRprtnBntpCd"
            				name="name26" dataType="text">
            			</w2:column>
            			<w2:column id="nStuNum" name="name27"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sParkEqmtFlagCd" name="name28"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nPrkLtArea" name="name29"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nParkAvaCarNum" name="name30"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nPrkLtMachNum" name="name31"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sFoodRprtnBntpCd" name="name32"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nBfyySaleAmt" name="name33"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sGasRprtnBntpCd" name="name34"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sGasRprtnAreaFlagCd"
            				name="name35" dataType="text">
            			</w2:column>
            			<w2:column id="sGasEqmtCpctFlagCd" name="name36"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sCityGasUseFlagCd" name="name37"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sGasEqmtUndgLctnYn" name="name38"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sAgreRestTermCd" name="name39"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sOwnrFlagCd" name="name40"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sOwnrDscrNo" name="name41"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sOwnrNm" name="name42"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sCrtorReln" name="name43"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sAccptPlac" name="name44"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sPaymTermCd" name="name45"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nRealPaymTerm" name="name46"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInsurTermCd" name="name47"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nRealInsurTerm" name="name48"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInsrdObjctStatCd" name="name49"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInsurStrtdate" name="name50"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInsurEndDate" name="name51"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sCnclExtnEndDate" name="name52"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sApplPlanCd" name="name53"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sApplPlanName" name="name54"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInptDler" name="name55"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInptDlerIP" name="name56"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInptDate" name="name57"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInptHms" name="name58"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sMdfcDler" name="name59"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sMdfcDlerIP" name="name60"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sMdfcDate" name="name61"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sMdfcHms" name="name62"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nGrntPrem" name="name63"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sel1" name="name64"
            				dataType="text">
            			</w2:column>
            		</w2:columnInfo>
            	</w2:dataList>
            	<w2:dataList id="dataList1" baseNode="list"
            		saveRemovedData="true" repeatNode="map">
            	</w2:dataList>
            	
            	<w2:dataList id="Ds_sExtraObjType" baseNode="list"
            		saveRemovedData="true" repeatNode="map">
            		<w2:columnInfo>
            			<w2:column id="nBasicRate" name="name1"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sObjType" name="name2"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sApplyTodt" name="name3"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sRiskClass" name="name4"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sObjDescr" name="name5"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sBidClass" name="name6"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sObjCode" name="name7"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInsType" name="name8"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sApplyFmdt" name="name9"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sDetailCode" name="name10"
            				dataType="text">
            			</w2:column>
            		</w2:columnInfo>
            	</w2:dataList>
            </w2:dataCollection>
            <w2:workflowCollection/>
        </xf:model>
        
        <!--// js Script include //--> 
		<script src="/cm/js/convertJs/Global_Script.js"/>
		<script src="/cm/js/convertJs/comm_Webservice.js"/> 
	 	<script src="/cm/js/convertJs/LongTerm_Script.js"/>
 
        <script><![CDATA[

  /****************************************************************************
 * 프로그램번호   : B631_Pop
 * 프로그램명     : 신체손해배상책임, 풍수재손해 특약상세입력
 * 파일명         : B631_Pop.xml
 * 프로그램 내용  : 신체손해배상책임, 풍수재손해 특약상세입력
 * 관련 프로그램  : 
 * 작성자         : coolys
 * 작성일         : 2013-05-29
 * 저작권         : Copyright ⓒ 2004. the K 손해보험㈜. All Right Reserved.
 * 변경내역       : 
 ****************************************************************************/

var applyEnable = "N";  // 설계상태(인수완료)-적용버튼(비활성화)   
var parent_Ds_Prprt = "";		// 부모창 목적물 정보 Ds Set  
var sToday = ""; // 현재일자(서버일자)

//---------------------------------------------------------------------------
// function 명 : FORM_OnLoadCompleted(obj)
// 내용        : FORM OnLoad
//--------------------------------------------------------------------------- 
scwin.init = function() {	
	console.log("[/CBSC117P.xml] [init()] ==> [폼 로딩] [TEST_01]" );   
	
	var pro = Promise.resolve();
	window.top.util.winTopShowModalChk = "T";
	util.winTopShowModal();

	pro = pro.then(function(rv) {
		return util.winTopShowModalPromise();
	});

	pro = pro.then(function(rv) {
		// init 부분 함수 입력하는곳  // =================================================>
		
		var indata = $w.getParameter("param");
		var inJSON = JSON.parse(indata); 	// 부모창에서 받아온 값( 예) inJSON.sMyPlan)
	 
		if (!util.isNull(inJSON.applyEnable)) 	applyEnable = inJSON.applyEnable;	 // 설계상태(인수완료)-적용버튼(비활성화)   
		
		var pObj = wprom.getParamObject();  
		parent_Ds_Prprt = pObj.Ds_Prprt;	// 부모창 목적물 정보 Ds Set 
		//console.log("[/CBSC117P.xml] [init()] ==> [폼 로딩] [parent_Ds_Prprt, 조회수]"+ parent_Ds_Prprt.getRowCount() +"[parent_Ds_Prprt]"+ WebSquare.xml.serialize(parent_Ds_Prprt.getAllXML()) );
		
		if (applyEnable == "Y")  btn_apply.setDisabled(false);
		//console.log("[/CBSC117P.xml] [init()] ==> [폼 로딩] ==> [적용버튼(비활성화)]"+ applyEnable );    	
	 
		sToday = WebSquare.date.getCurrentServerDate("yyyyMMdd"); 		// global 현재일자
		
	   scwin.lfn_getCommonCodes();	   // 공통코드 조회
	   
		// DataSet 초기화
		scwin.lfn_initDataset();
	 
		// 특수건물구분(Combo) 초기값(01: 비특수건물, 02: 특수건물) 설정
		cmb_SpclBuldgFlagCd.setValue("02");	 
	 
		// 특수물건유형 설정
		scwin.lfn_getExtraObjTypeTask();
	 
		// 종업원부담보가입여부(Combo) 초기값(아니오) 설정
		cmb_EmplSubCvrgeInsYn.setValue("N");
 		
		return ;		// init 함수를 종료하고자 할때 사용	// =================================================> 
	});

	pro = pro.then(function(rv) {
		util.winTopHideModal();
	});
 
	return pro; 
	//console.log("[/CBSC117P.xml] [init()] ==> [폼 로딩] [TEST_end]" );   
};

//---------------------------------------------------------------------------
// function 명 : lfn_getCommonCodes()
// 내용        : 공통코드 조회
// Param       : sobjObj         // ServiceObject 객체
//             : dobjObj         // DataObject 객체
//             : dataSetIds      // Dataset 아이디
//             : sCdTypes        // 항목코드
//             : componentIds    // Component Id ==> 없으면 안넣어도 됨
//             : titleTypes      // Combo 항목추가: 전체(A) , 선택(S) , 없음(N)
//---------------------------------------------------------------------------
scwin.lfn_getCommonCodes = function() {
	//console.log("[/CBSC117P.xml] [lfn_getCommonCodes()] ==> [공통코드 조회_01] [TEST_01]" );
	
    wconv.clear(DsWs_SpclBuldgFlagCd); // 특수건물구분코드
	
	var dataSets = "DsWs_SpclBuldgFlagCd";   
	var columns = "SpclBuldgFlagCd";   
    var objects = "";
    var titleTypes =  "N"; 		// A:전체, S:선택, N:안넣기 
    
	gfn_getCommonCodes(dataSets, columns, objects, titleTypes);    
    //console.log("[/CBSC117P.xml] [lfn_getCommonCodes()] ==> [특수건물구분 Ds] [DsWs_SpclBuldgFlagCd_갯수]"+ DsWs_SpclBuldgFlagCd.getRowCount() +"[DsWs_SpclBuldgFlagCd]"+ WebSquare.xml.serialize(DsWs_SpclBuldgFlagCd.getAllXML()) ); 
};

//---------------------------------------------------------------------------
// function 명 : btn_search_OnClick(obj)
// 내용        : Dataset copy
//---------------------------------------------------------------------------
scwin.lfn_initDataset = function() {
	//console.log("[/CBSC117P.xml] [lfn_initDataset()] ==> [DataSet 초기화] [TEST_01]" );
 
	wconv.copy(Ds_Prprt_Appl, parent_Ds_Prprt);	 // 피보험목적물 Dataset Copy(Ds_Prprt_Appl 데이타 생성됨) 
	//Ds_Prprt_Appl.setRowPosition(0);	 // Row 위치 0번째로 지정
	wconv.copy(Ds_SpclBuldgFlagCd, DsWs_SpclBuldgFlagCd);    // 특수건물구분코드 Dataset Copy(Ds_SpclBuldgFlagCd 데이타 생성됨) 
  	//console.log("[/CBSC117P.xml] [lfn_initDataset()] ==> [Dataset copy] [Ds_Prprt_Appl, 조회수]"+ Ds_Prprt_Appl.getRowCount() +"[parent_Ds_Prprt]"+ WebSquare.xml.serialize(Ds_Prprt_Appl.getAllXML()) );
 
	util.setRowPosition(Ds_Prprt_Appl, Ds_Prprt_Appl.getRowPosition());		// datalist 포지션 변경(gridView 자동 연동)  
	
	//Ds_Prprt_Appl.setRowPosition(0);	 // Row 위치 0번째로 지정 
};

//---------------------------------------------------------------------------
// function 명 : btn_Close_OnClick(obj)
// 내용        : 닫기 OnClick
//---------------------------------------------------------------------------
scwin.btn_Close_OnClick = function(obj) { 
    wprom.close("");
};

//---------------------------------------------------------------------------
// function 명 : btn_apply_OnClick(obj)
// 내용        : 적용 OnClick
//---------------------------------------------------------------------------
scwin.btn_apply_OnClick = function(obj) {
	//console.log("[/CBSC117P.xml] [btn_apply_OnClick()] ==> [적용] [TEST_01]" ); 
 	//console.log("[/CBSC117P.xml] [btn_apply_OnClick()] ==> [적용] [Ds_Prprt_Appl, 조회수]"+ Ds_Prprt_Appl.getRowCount() +"[Ds_Prprt_Appl]"+ WebSquare.xml.serialize(Ds_Prprt_Appl.getAllXML()) );
	
	if (Ds_Prprt_Appl.getRowCount() < 0) {
    //if (Ds_Prprt_Appl.getFocusedRowIndex() < 0) {
        wprom.alert("목적물이 입력되지 않았습니다!");
        return;
    }
    if (wconv.trim(cmb_SpclBuldgFlagCd.getValue()) == null || wconv.trim(cmb_SpclBuldgFlagCd.getValue()) == "") {
        wprom.alert("특수건물구분을 선택하세요!");
        cmb_SpclBuldgFlagCd.focus();
        return;
    }
 
    /*
        if( trim(edt_SpclBuldgNo.Text) == null || trim(edt_SpclBuldgNo.Text) == "")
        {
    	    alert("특수건물번호를 입력하세요!");
    	    edt_SpclBuldgNo.SetFocus();
            return;
        }
    */
 
    // 특수건물일때
    if (cmb_SpclBuldgFlagCd.getValue() == "02") {
        if (wconv.trim(cmb_SpclBuldgTypeCd.getValue()) == null || wconv.trim(cmb_SpclBuldgTypeCd.getValue()) == "" || wconv.trim(cmb_SpclBuldgTypeCd.getValue()) == "0") {
            wprom.alert("특수건물유형을 선택하세요!");
            cmb_SpclBuldgTypeCd.focus();
            return;
        }
    }
    if (wconv.trim(cmb_EmplSubCvrgeInsYn.getValue()) == null || wconv.trim(cmb_EmplSubCvrgeInsYn.getValue()) == "") {
        wprom.alert("종업원부담보가입여부를 선택하세요!");
        cmb_EmplSubCvrgeInsYn.focus();
        return;
    }
	
   	//Ds_Prprt_Appl.setCellData(0, "sSpclBuldgTypeCd", cmb_SpclBuldgTypeCd.getValue() );		// 특수건물유형 
	//console.log("[/CBSC117P.xml] [btn_apply_OnClick()] ==> [적용] [Ds_Prprt_Appl.sSpclBuldgTypeCd]"+ Ds_Prprt_Appl.getCellData(0, "sSpclBuldgTypeCd") );
  
	wconv.copy(parent_Ds_Prprt, Ds_Prprt_Appl);	 // 보험 목적물 적용 정보 Ds(Ds_Prprt_Appl)을 parent_Ds_Prprt에 복사  
    parent_Ds_Prprt.setRowPosition(Ds_Prprt_Appl.getRowPosition());	 // Row 위치 Ds_Prprt_Appl.getRowPosition() 번째로 지정 
    //console.log("[/CBSC117P.xml] [btn_apply_OnClick()] ==> [적용] [Ds_Prprt_Appl.getRowPosition]"+ Ds_Prprt_Appl.getRowPosition() +"[parent_Ds_Prprt.getRowPosition]"+ parent_Ds_Prprt.getRowPosition() );
    //console.log("[/CBSC117P.xml] [btn_apply_OnClick()] ==> [적용] [parent_Ds_Prprt, 조회수]"+ parent_Ds_Prprt.getRowCount() +"[parent_Ds_Prprt]"+ WebSquare.xml.serialize(parent_Ds_Prprt.getAllXML()) );
	
    wprom.close("");	 // 창닫기
};

//---------------------------------------------------------------------------
// function 명 : btn_SpclBuldgNo_OnClick(obj)
// 내용        : 특수건물 팝업 OnClick
//---------------------------------------------------------------------------
scwin.btn_SpclBuldgNo_OnClick = function(obj) {
//	wprom.alert("추후 개발 예정 입니다.[특수건물소재지별조회(GPR11210200s_P02)]");
//   	 	return;   
   	 	
   	 	//lfn_dialogGPR11210200s_P02
   	 	scwin.lfn_dialogGPR11210200s_P02();
   	 	
//    var promise = Promise.resolve();
//    promise = promise.then(function(rtnVal) {
//        return scwin.lfn_dialogGPR11210200s_P02();
//    });
//    
//    return promise;
};

//---------------------------------------------------------------------------
// function 명 : cmb_SpclBuldgFlagCd_OnChanged
// 내용        : 특수건물구분 OnChanged
//--------------------------------------------------------------------------- 
scwin.cmb_SpclBuldgFlagCd_OnChanged = function(info) {
	//console.log("[/CBSC117P.xml] [cmb_SpclBuldgFlagCd_OnChanged()] ==> [특수건물구분 OnChanged] [TEST_01] [strCode]"+ strCode );
	
	var oldValue = info.oldValue;   //이전 value
    var strCode = info.newValue;   //현재 value
	//console.log("[/CBSC117P.xml] [cmb_SpclBuldgFlagCd_OnChanged()] ==> [특수건물구분 OnChanged] [TEST_02] [strCode]"+ strCode +"[oldValue]"+ oldValue );
	
    // 특수건물
    if (strCode == "02") {
        // 특수건물번호
        edt_SpclBuldgNo.setDisabled(false);
        edt_SpclBuldgNo.setValue("");
        // 특수건물번호 검색팝업
        btn_SpclBuldgNo.setDisabled(false);
        // 특수건물유형
        cmb_SpclBuldgTypeCd.setDisabled(false);
        cmb_SpclBuldgTypeCd.setValue("");
    } else if (strCode == "01") {
        // 특수건물번호
        edt_SpclBuldgNo.setDisabled(true);
        edt_SpclBuldgNo.setValue("");
        // 특수건물번호 검색팝업
        btn_SpclBuldgNo.setDisabled(true);
        // 특수건물유형
        cmb_SpclBuldgTypeCd.setDisabled(true);
        cmb_SpclBuldgTypeCd.setValue("");
    }
};

//---------------------------------------------------------------------------
// function 명 : lfn_getExtraObjTypeTask
// 내용        : 특수물건유형
//---------------------------------------------------------------------------
scwin.lfn_getExtraObjTypeTask = function() {

	//console.log("[/CBSC117P.xml] [lfn_getRealNo()] ==> [특수물건유형] [TEST_01]" );
	 
	wconv.clear(Ds_sExtraObjType);

	var MethodObj = new callService("com.inswave.newgen.com.cod.task.CommTask", "comSelect");  	// 01. 특수물건유형 조회 Obj 
	MethodObj.setId("comSelect");		// ID 셋팅
	MethodObj.setParam("tableName", "GENMB11");		// Param 셋팅 
	MethodObj.setParam("methodName", "selectExtraObjType");		// Param 셋팅 
	MethodObj.setParam("sInsType", "1101");					// Param 셋팅 
	MethodObj.setParam("sObjType", "A");						// Param 셋팅  
	MethodObj.setParam("sApplyFmdt", sToday);				// Param 셋팅 
	MethodObj.setUrl("/contract/CBSC117PController.do");  		// 서버단 호출 URL
	MethodObj.setXPath("//*/hashtable/data/vector/data");		// XPath 
	MethodObj.addXPath("//*/vector/data/GENMB11");			// XPath 
	MethodObj.sync();		// 동기 처리[기본(async:비동기)]
	MethodObj.send();		// 최종 전송 
	//console.log("[/CBSC117P.xml] [lfn_getRealNo()] ==> [01. 특수물건유형, 전송_완료] [TEST_91]");  
 	
 	//util.interfaceKey(_tranSync.result.serviceDs); 		// interface 조회 후 Data 리스트 Display
 
	Ds_sExtraObjType.setJSON(_tranSync.getDsJson("GENMB11"));		// DS 셋팅(조회 결과) 
	
	var insRow = Ds_sExtraObjType.insertRow(0);
	Ds_sExtraObjType.setCellData(0, "sObjCode", "");
	Ds_sExtraObjType.setCellData(0,  "sObjDescr", "");   // 전체 칼럼 "" 처리
	
	Ds_Prprt_Appl.setRowPosition(0);	 // Row 위치 0번째로 지정 
	//console.log("[/CBSC117P.xml] [lfn_getRealNo()] ==> [Ds_sExtraObjType DS_갯수]"+ Ds_sExtraObjType.getRowCount() +"[Ds_sExtraObjType]"+ WebSquare.xml.serialize(Ds_sExtraObjType.getAllXML()) ); 
};
 
//---------------------------------------------------------------------------
// function 명 : lfn_dialogGPR11210200s_P02_Pop
// 내용        : 특수건물소재지 Popup
//---------------------------------------------------------------------------
scwin.lfn_dialogGPR11210200s_P02 = function() { 
	//console.log("[/CBSC117P.xml] [lfn_dialogGPR11210200s_P02()] ==> [특수건물소재지] [TEST_01]" );
 
    var indata = "p_sExtraObjNo=''";
    
	var promise = Promise.resolve();   // Promise 설정
			
    promise = promise.then(function(rtnVal) { 
     	 //팝업창으로 보낼 자료(Parameter)
		var indata  = {};
	
		var popInfo = {
		 	"width"     : 725,
			"height"    : 478,
			"top"       : 0,
			"left"      : 0,
			"indata"    : indata,		 //indata
			"callback"  : "",
			"title"     : "특수건물소재지별 조회"
		};
		return wprom.popupOpen("/ui/cbsc/CBSC179P.xml", popInfo);		// 특수건물소재지별 조회 팝업 처리 
    });	 // end of promise()
    
    promise = promise.then(function(rst) { 
 		//console.log("[/CBSC117P.xml] [lfn_dialogB650_Pop()] ==> [시설소유배상업종코드 Popup] [TEST_07] [rst]"+ rst );
    	
        if (wconv.length(rst) != 0) {   
            if (wconv.trim(rst[4]) == null || wconv.trim(rst[4]) == "") {
               	rst[4] = "999999999";
            }
            //console.log("[/CBSC117P.xml] [lfn_dialogB650_Pop()] ==> [시설소유배상업종코드 Popup] [특수건물번호]"+ rst[4] +"[특수건물유형]"+ rst[6] );
           
            Ds_Prprt_Appl.setCellData(Ds_Prprt_Appl.getRowPosition(), "sSpclBuldgNo", rst[4]); 		// 특수건물번호
            Ds_Prprt_Appl.setCellData(Ds_Prprt_Appl.getRowPosition(), "sSpclBuldgTypeCd", rst[6]); 	// 신배책업종(특수건물유형)
        }
    });	 // end of promise() 
};
 	]]></script>
    </head>
    <body>
        <xf:group class="cont_wrap layer" id="B631_Pop"
            style="position:absolute; WorkArea:true;  Ver:1.0;  PidAttrib:7;/*  height:245px;*/ left:0px; top:0px;/* width:416px;"
            userData1="특약상세입력[B631_Pop]" userData2=" OnLoadCompleted:scwin.B631_OnLoadCompleted; ">
            <DataObjects>
                <DataObject/>
                <DataObject/>
            </DataObjects>
            <ServiceObjects>
                <ServiceObject/>
            </ServiceObjects>
            <xf:group arcsize="8" class="sty_area_form" id="Shape0"
                style="position:absolute;height:26px;width:437px;bottom:58px;left:0px;right:410px;top:30px;" userData3="Rectangle"/>
            <xf:group arcsize="8" class="sty_area_form" id="Shape2"
                style="position:absolute;height:101px;width:437px;bottom:95px;left:0px;right:410px;top:67px;" userData3="Rectangle">
            	<xf:group class="form_w_line" id="" style="top:24px;" />
        		<xf:group class="form_w_line" id="" style="top:49px;" />
        		<xf:group class="form_w_line" id="" style="top:74px;" />
            </xf:group>
            <w2:textbox id="Static5" label="특약상세입력" style="position:absolute; VAlign:Middle;  height:20px; left:0px; top:0px; " tagname="" class="sub_pop_title01">
</w2:textbox>
            
            <w2:textbox class="sty_lb_Detail" id="Static1" label=" 신체손해배상책임, 풍수재손해"
                style="position:absolute;
 WordWrap:TRUE;
  VAlign:Middle;
  background-color:user22;
  height:22px;left:127px;top:33px;
 width:297px;
;" tagname=""/>
            <xf:trigger class="detail_search" ev:onclick="scwin.btn_SpclBuldgNo_OnClick" id="btn_SpclBuldgNo"
                style="position:absolute; ImageID:btn_Input_Search;left:403px;top:95px;height:18px;width:18px" tabIndex="3" type="anchor"/>
            <xf:select1 appearance="minimal" class="sty_ipt_form" disabled="true" emptyItem="true" id="cmb_EmplSubCvrgeInsYn"
                ref="data:Ds_Prprt_Appl.sEmplSubCvrgeInsYn"
                style="position:absolute;INDEX:1;height:20px;width:128px;border-style:solid;left:126px;top:146px;" tabIndex="5" renderType="native">
                <xf:choices>
                    <xf:itemset nodeset="data:Ds_EmplSubCvrgeInsYn">
                        <xf:label ref="sHnglCdName"/>
                        <xf:value ref="sCd"/>
                    </xf:itemset>
                </xf:choices>
            </xf:select1>
            <w2:textbox class="sty_lb_Basic" id="Static17" label="특수건물구분"
                style="position:absolute; VAlign:Middle;  height:24px;left:0px;top:67px; width:104px;" tagname=""/>
            <w2:textbox class="sty_lb_Basic" id="Static15" label="특수건물번호"
                style="position:absolute; VAlign:Middle;  height:24px;left:0px;top:92px; width:104px;" tagname=""/>
            <w2:textbox class="sty_lb_Basic" id="Static16" label="특수건물유형"
                style="position:absolute; VAlign:Middle;  height:24px;left:0px;top:117px; width:104px;" tagname=""/>
            <w2:textbox class="sty_lb_Basic" id="Static20" label="종업원부담보가입"
                style="position:absolute; VAlign:Middle;  height:24px;left:0px;top:142px; width:104px;" tagname=""/>
            <xf:trigger class="popup_top_btn" disabled="true" ev:onclick="scwin.btn_apply_OnClick" id="btn_apply"
                style="position:absolute;ImageID:btn_Input_02;height:20px;width:25px;left:337px;top:0px;" tabIndex="6" type="anchor">
                <xf:label><![CDATA[적용]]></xf:label>
            </xf:trigger>
            <xf:trigger class="popup_top_btn" ev:onclick="scwin.btn_Close_OnClick" id="btn_Close"
                style="position:absolute;ImageID:btn_Comm_Close;height:20px;width:25px;left:388px;top:0px;" tabIndex="7" type="anchor">
                <xf:label><![CDATA[닫기]]></xf:label>
            </xf:trigger>
            <xf:input class="sty_ipt_form" disabled="false" id="edt_SpclBuldgNo" readOnly="TRUE" ref="data:Ds_Prprt_Appl.sSpclBuldgNo"
                style="position:absolute;height:20px;width:275px;border-style:solid;border-color:#b7cce1;left:126px;top:95px;" tabIndex="2"/>
            <w2:textbox class="sty_lb_Basic" id="Static2" label="특약명"
                style="position:absolute; VAlign:Middle;  height:24px;left:0px;top:30px; width:104px;" tagname=""/>
            <xf:select1 appearance="minimal" class="sty_ipt_form" emptyItem="true" id="cmb_SpclBuldgTypeCd"   
                style="position:absolute;INDEX:1;height:20px;width:298px;border-style:solid;left:126px;top:120px;" tabIndex="4" renderType="native" ev:onviewchange="scwin.cmb_SpclBuldgTypeCd_onviewchange" ref="data:Ds_Prprt_Appl.sSpclBuldgTypeCd"> <!-- 특수건물유형 cmb -->
                <xf:choices>
                    <xf:itemset nodeset="data:Ds_sExtraObjType">
                        <xf:label ref="sObjDescr"/>
                        <xf:value ref="sObjCode"/>
                    </xf:itemset>
                </xf:choices>
            </xf:select1>
            <xf:select1 appearance="minimal" class="sty_ipt_form" disabled="true" emptyItem="true"
                ev:onchange=" " id="cmb_SpclBuldgFlagCd" ref=""
                style="position:absolute;INDEX:1;height:20px;width:298px;border-style:solid;left:126px;top:70px;" tabIndex="1" renderType="native" ev:onviewchange="scwin.cmb_SpclBuldgFlagCd_OnChanged">
                <xf:choices>
                    <xf:itemset nodeset="data:Ds_SpclBuldgFlagCd">
                        <xf:label ref="sHnglCdName"/>
                        <xf:value ref="sCd"/>
                    </xf:itemset>
                </xf:choices>
            </xf:select1>
        </xf:group>
    </body>
</html>
