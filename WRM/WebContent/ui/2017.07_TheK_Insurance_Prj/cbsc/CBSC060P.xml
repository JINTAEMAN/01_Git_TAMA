<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="/cm/css/all.css" type="text/css"?>
<?xml-stylesheet href="/cm/css/convert.css" type="text/css"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:w2="http://www.inswave.com/websquare" xmlns:xf="http://www.w3.org/2002/xforms">
    <head>
        <w2:type>DEFAULT</w2:type>
        <w2:buildDate/>
        <xf:model>
            <xf:instance>
                <data/>
            </xf:instance>
            <w2:dataCollection>
                <w2:dataList baseNode="list" id="Ds_LTIEA09" repeatNode="map"/>
                <w2:dataList baseNode="list" id="DsWs_DlFlagCd" repeatNode="map"/>
                <w2:dataList baseNode="list" id="DsWs_LTIEA09" repeatNode="map" userData2="//*/vector/data/LTIEA09"/>
                <w2:dataList baseNode="list" id="warning" repeatNode="map" userData2="//*/WARNING"/>
                <w2:dataList baseNode="list" id="warning0" repeatNode="map" userData2="//*/WARNING"/>
                <w2:dataList baseNode="list" id="DsWs_RecvWdrcFlagCd" repeatNode="map"/>
            </w2:dataCollection>
            <w2:workflowCollection/>
        </xf:model>
		<script src="/cm/js/convertJs/Global_Script.js"/>
		<script src="/cm/js/convertJs/comm_Webservice.js"/>
		<script src="/cm/js/convertJs/LongTerm_Script.js"/>
		<script src="/cm/js/convertJs/NewGen_Script.js"/>
        <script><![CDATA[
/*■■■■■■■■■■■■■■■■■■■■■스크립트 변환 결과■■■■■■■■■■■■■■■■■■■■■
※본 주석은 수작업 변환 참고용입니다. ★개발완료 후에는 필히 삭제해주세요.★
변환시간:  Fri Sep 01 2017 14:10:35 GMT+0900 (대한민국 표준시)
파일ID:  Btn_Part.xml

아래의 작업을 먼저 해주세요.


1. scwin.init() 함수에 아래의 글로벌 데이터리스트를 선언합니다.
--> 해당 화면에는 추가할 글로벌 변수가 없습니다. 

2. 공통.JS 파일을 include해주세요.
</xf:model>
 ***include 위치(하단에 주석처리 되어 있습니다.)***
<script><![CDATA[

예시)
</xf:model>
<script src="/cm/js/convertJs/예시입니다.js"/>
<script src="/cm/js/convertJs/예시입니다.js"/>
<script src="/cm/js/convertJs/예시입니다.js"/>
<script><![CDATA[

3. 표준에 어긋난 코딩인 경우 ✖ 으로 return 되어 있습니다. 검색으로 ✖이 나온다면 ASIS 소스를 확인해주세요.
ex) ASIS if(a = 1 and b = 2) {} ------> TOBE if (✖ = 2) {}

4. dialog함수로 팝업을 호출 할 경우에는 실제 파일이 있는 경로로 변경해주세요
ex) 현재 PROJECT_PATH_TEMP입니다. 

-호출구조-

호출구조는 모든 화면이 아닌 변환대상화면을 기준으로 분석하였습니다.
선언하지 않은 변수를 사용중이라면 caller 에서 넘겼을 가능성이 높습니다.
파일 ID는 소스의 form ID로 가정했습니다. 아래의 결과는 따로 확인해주세요.
Btn_Part.xml에서 호출 (callee ID):  
Btn_Part.xml을 호출   (caller ID):  
■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■*/
/****************************************************************************
 * 프로그램번호   : D050_Pop
 * 프로그램명     : 보험료입출금거래내역조회
 * 파일명         : D050_Pop.xml
 * 프로그램 내용  : 보험료입출금거래내역조회
 * 관련 프로그램  : 
 * 작성자         : 이용주
 * 작성일         : 2010-10-26
 * 저작권         : Copyright ⓒ 2004. the K 손해보험㈜. All Right Reserved.
 * 변경내역       : 
 ****************************************************************************/
// 계약번호
var sCrNo = "";
var nInrpsSeqno = "";
// 계약자
var sCrtor = "";
// 계약상태
var sCrStat = "";
// 보험기간
var sInsurTerm = "";

//---------------------------------------------------------------------------
// function 명 : D050_OnLoadCompleted
// 내용        : OnLoadCompleted
//---------------------------------------------------------------------------
scwin.init = function() {

var pro = Promise.resolve();

window.top.util.winTopShowModalChk = "T";
util.winTopShowModal();

pro = pro.then(function(rv) {
	return util.winTopShowModalPromise();
});

pro = pro.then(function(rv) {

	wprom.windowOpenInit(Btn_Part);
	
	var inJson; 
	var indata = $w.getParameter("param");
	inJson = JSON.parse(indata);
	//alert(indata);  //{"id" : "ddd", "name" : "ddd"}; 출력
	try {
		sCrNo = inJson.sCrNo;
		nInrpsSeqno = inJson.nInrpsSeqno;
	} catch(e) {
	}
	
    // 화면 초기화
    //lfn_clearDisplay();
    scwin.lfn_Search();
    
});

pro = pro.then(function(rv) {
	util.winTopHideModal();
});

return pro;

};

//---------------------------------------------------------------------------
// function 명 : lfn_Search
// 내용        : 입출금거래내역조회
//---------------------------------------------------------------------------
scwin.lfn_Search = function() {
	// 초기화
    wconv.clear(Ds_LTIEA09);
    wconv.clear(DsWs_LTIEA09);
    wconv.clear(warning);
    // 입출금거래내역조회
	var transObj = new callService("com.inswave.longterm.psv.ens.task.EAD050Task", "getSbcvrCvrgePartCd", "", "");
	transObj.setUrl("/contract/CBSC060PController.do");
	transObj.setId("getSbcvrCvrgePartCd");
	transObj.setParam("sCrNo", sCrNo); // 계약번호
	transObj.setParam("nInrpsSeqno", nInrpsSeqno);
	transObj.setXPath("//*/vector/data/LTIEA09");
	transObj.addXPath("//*/WARNING");
	//transObj.callBack("scwin.subCallBackfunction");
	transObj.sync();
	transObj.send();
	//util.interfaceKey(_tranSync.result.serviceDs);
	
	util.jSonDsCreate(_tranSync.getDsJson("WARNING"), "warning");
	if (warning.getRowCount() != 0) {
        wprom.alert(warning.getCellData(0, "msg"));
        return;
    }

	util.jSonDsCreate(_tranSync.getDsJson("LTIEA09"), "DsWs_LTIEA09");
	util.jSonDsCreate(_tranSync.getDsJson("LTIEA09"), "Ds_LTIEA09");
	util.setCompBindRefresh("Ds_LTIEA09");
	util.setRowPosition(Ds_LTIEA09, 0);
};

//---------------------------------------------------------------------------
// function 명 : Btn_Close_OnClick
// 내용        : 화면닫기
//---------------------------------------------------------------------------
scwin.lfn_Btn_Close_OnClick = function() {
    wprom.close("");
};



scwin.ExprDis = function(gridId, colId, rowIndex) {
	//console.log("EXPR : " + gridId + "_" + colId + "_" + rowIndex);
	var rtnValue = "";
	try {
		//console.log("EXPR : " + gridId + "_" + colId + "_" + rowIndex);
		var grdOb = eval(gridId);
		var dataListOb = eval(eval(gridId).getDataList());
		switch (gridId) {
			case "grd_premRecvWdrcDlSpec" :
				if (colId == "sSubCvrgeTermCd") {
					rtnValue = dataListOb.getCellData(rowIndex, colId) + "년";
				} else 	if (colId == "sApplStrtDate") {
					rtnValue = dataListOb.getCellData(rowIndex, "sApplStrtDate") + "~" + dataListOb.getCellData(rowIndex, "sApplEndDate");
				}
			break;
		}
	} catch(e){
		rtnValue = "error";
		console.log("EXPR ERROR : lfn_exprDisplay " + gridId + "_" + colId + "_" + rowIndex);
	}
	return rtnValue;
};
]]></script>
    </head>
    <body>
        <xf:group class="cont_wrap layer" id="Btn_Part"
            style="position:absolute; WorkArea:true;  Ver:1.0;  PidAttrib:7;  /*height:376px;*/ left:0px; top:0px;/* width:544px;"
            userData1="부담보내역조회[D080_Pop]" userData2=" OnLoadCompleted:scwin.F050_OnLoadCompleted; ">
            <DataObjects>
                <DataObject/>
                <DataObject/>
            </DataObjects>
            <ServiceObjects>
                <ServiceObject/>
                <ServiceObject/>
            </ServiceObjects>
            <xf:switch id="switch_94" style=" ">
                <xf:case id="Default_95" style=" ">
                    <w2:gridView autoFit="allColumn" autoFitMinWidth="100" class="sty_Grid" dataList="Ds_LTIEA09"
                        ev:onblur="scwin.nfn_CopyGridCell" focusMode="row" id="grd_premRecvWdrcDlSpec" inputType="text" readOnly="true"
                        style="position:absolute; UseDBuff:true;  InputPanel:FALSE;  EndLineColor:default;  border:Flat;  AutoFitEndLine:Hide;  height:325px; left:0px; right:528px; top:30px; width:519px;" tabIndex="1">
                        <w2:header>
                            <w2:row>
                                <w2:column dataType="text"
                                	id="head_id_744" inputType="text"
                                	readOnly="true" rowSpan="2"
                                	style="" userData1="0"
                                	userData3="0" value="피보험자" width="109" />
                                <w2:column dataType="text"
                                	id="head_id_745" inputType="text"
                                	readOnly="true" rowSpan="2"
                                	style="" userData1="1"
                                	userData3="0" value="No" width="46" />
                                <w2:column dataType="text"
                                	id="head_id_746" inputType="text"
                                	readOnly="true" rowSpan="2"
                                	style="" userData1="2"
                                	userData3="0" value="부담보" width="126" />
                                <w2:column dataType="text"
                                	id="head_id_747" inputType="text"
                                	readOnly="true" rowSpan="2"
                                	style="" userData1="3"
                                	userData3="0" value="기간" width="78" />
                                <w2:column dataType="text"
                                	id="head_id_748" inputType="text"
                                	readOnly="true" rowSpan="2"
                                	style="" userData1="4"
                                	userData3="0" value="부담보기간"
                                	width="123" />
                            </w2:row>
                            <w2:row/>
                        </w2:header>
                        <w2:gBody>
                            <w2:row>
                                <w2:column dataType="text"
                                	id="sInrpsName" inputType="text"
                                	readOnly="true" style="height:27px;"
                                	textAlign="center" userData1="0"
                                	userData3="0" width="109" />
                                <w2:column dataType="text"
                                	id="sSbcvrCvrgePartCd" inputType="text"
                                	readOnly="true" style=""
                                	textAlign="center" userData1="1"
                                	userData3="0" width="46" />
                                <w2:column dataType="text" id="vtext"
                                	inputType="text" readOnly="true"
                                	style="" textAlign="left" userData1="2"
                                	userData3="0" width="126" />
                                <w2:column dataType="text"
                                	expression="scwin.ExprDis('grd_premRecvWdrcDlSpec', 'sSubCvrgeTermCd', rowIndex())"
                                	id="temp_id_749" inputType="expression"
                                	readOnly="true" style=""
                                	textAlign="center" userData1="3"
                                	userData3="0" width="78" />
                                <w2:column dataType="text"
                                	expression="scwin.ExprDis('grd_premRecvWdrcDlSpec', 'sApplStrtDate', rowIndex())"
                                	id="temp_id_750" inputType="expression"
                                	readOnly="true" style=""
                                	textAlign="center" userData1="4"
                                	userData3="0" width="123" />
                            </w2:row>
                        </w2:gBody>
                    </w2:gridView>
                </xf:case>
            </xf:switch>
            <w2:textbox id="Static6" label="부담보 내역 조회" style="position:absolute; VAlign:Middle;  height:24px; left:0px; top:0px; " tagname="" class="sub_pop_title01">
</w2:textbox>
            
            <xf:trigger class="popup_top_btn" ev:onclick="scwin.lfn_Btn_Close_OnClick" id="btn_close"
                style="position:absolute; ImageID:btn_Comm_Close;  height:20px;left:470px;top:0px; width:58px;" tabIndex="5" type="anchor">
                <xf:label><![CDATA[닫기]]></xf:label>
            </xf:trigger>
        </xf:group>
    </body>
</html>
