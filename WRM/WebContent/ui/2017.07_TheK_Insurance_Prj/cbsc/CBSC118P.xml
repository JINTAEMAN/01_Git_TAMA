<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="/cm/css/all.css" type="text/css"?>
<?xml-stylesheet href="/cm/css/convert.css" type="text/css"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:w2="http://www.inswave.com/websquare" xmlns:xf="http://www.w3.org/2002/xforms">
      <head>
    <!-- 
        ###################################################
         파일명 : CBSC118P.xml
         프로그램명 : 시설소유(관리)자 특약상세입력
         설 명 :  시설소유(관리)자 특약상세입력
         작성자 : 진태만
         작성일 : 2017.09.29
 
         수정일자            수정자                  수정내용
        ==================================================
        2017.09.29        진태만          최초작성
        ###################################################
     -->
	 <w2:type>DEFAULT</w2:type>
        <w2:buildDate/>
        <xf:model>
            <xf:instance>
                <data/>
            </xf:instance>
            <w2:dataCollection>

            	<!-- 피보험 목적물 적용 정보 Ds  -->
            	<w2:dataList id="Ds_Prprt_Appl" baseNode="list"
            		saveRemovedData="true" repeatNode="map">
            		<w2:columnInfo>
            			<w2:column id="sPlanNo" name="name1"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nInsrdObjctSeqno" name="name2"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nCrChngNo" name="name3"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInsBntpCd" name="name4"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInsBntpCdMcls" name="name5"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInsBntpObjtFlagCd" name="name6"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sRatoBntpCd" name="name7"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sRatoBntpCdMcls" name="name8"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sRatoBntpObjtFlagCd" name="name9"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sPoleTypeCd" name="name10"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sExtrnWlTypeCd" name="name11"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sRoofTypeCd" name="name12"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sBuldgStrtGradCd" name="name13"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sBuldgStrtGradCdNm" name="name14"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nInsArea" name="name15"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nBuldgGrodFlct" name="name16"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nBuldgUndgFlct" name="name17"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sObjctGrodUndgFlagCd"
            				name="name18" dataType="text">
            			</w2:column>
            			<w2:column id="nObjctRelvFlct" name="name19"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sSpclBuldgFlagCd" name="name20"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sSpclBuldgNo" name="name21"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sSpclBuldgTypeCd" name="name22"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sEmplSubCvrgeInsYn" name="name23"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sEqmtOwnRprtnBntpCd"
            				name="name24" dataType="text">
            			</w2:column>
            			<w2:column id="sEqmtScal" name="시설규모"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sSchlMngrRprtnBntpCd"
            				name="name26" dataType="text">
            			</w2:column>
            			<w2:column id="nStuNum" name="name27"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sParkEqmtFlagCd" name="name28"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nPrkLtArea" name="name29"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nParkAvaCarNum" name="name30"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nPrkLtMachNum" name="name31"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sFoodRprtnBntpCd" name="name32"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nBfyySaleAmt" name="name33"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sGasRprtnBntpCd" name="name34"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sGasRprtnAreaFlagCd"
            				name="name35" dataType="text">
            			</w2:column>
            			<w2:column id="sGasEqmtCpctFlagCd" name="name36"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sCityGasUseFlagCd" name="name37"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sGasEqmtUndgLctnYn" name="name38"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sAgreRestTermCd" name="name39"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sOwnrFlagCd" name="name40"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sOwnrDscrNo" name="name41"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sOwnrNm" name="name42"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sCrtorReln" name="name43"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sAccptPlac" name="name44"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sPaymTermCd" name="name45"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nRealPaymTerm" name="name46"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInsurTermCd" name="name47"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nRealInsurTerm" name="name48"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInsrdObjctStatCd" name="name49"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInsurStrtdate" name="name50"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInsurEndDate" name="name51"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sCnclExtnEndDate" name="name52"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sApplPlanCd" name="name53"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sApplPlanName" name="name54"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInptDler" name="name55"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInptDlerIP" name="name56"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInptDate" name="name57"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInptHms" name="name58"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sMdfcDler" name="name59"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sMdfcDlerIP" name="name60"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sMdfcDate" name="name61"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sMdfcHms" name="name62"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nGrntPrem" name="name63"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sel1" name="name64"
            				dataType="text">
            			</w2:column>
            		</w2:columnInfo>
            	</w2:dataList>

            	<!-- 피보험 목적물 정보 Ds  -->
            	<w2:dataList id="Ds_Prprt" baseNode="list"
            		saveRemovedData="true" repeatNode="map">
            		<w2:columnInfo>
            			<w2:column id="sPlanNo" name="name1"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nInsrdObjctSeqno" name="name2"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nCrChngNo" name="name3"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInsBntpCd" name="name4"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInsBntpCdMcls" name="name5"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInsBntpObjtFlagCd" name="name6"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sRatoBntpCd" name="name7"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sRatoBntpCdMcls" name="name8"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sRatoBntpObjtFlagCd" name="name9"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sPoleTypeCd" name="name10"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sExtrnWlTypeCd" name="name11"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sRoofTypeCd" name="name12"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sBuldgStrtGradCd" name="name13"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sBuldgStrtGradCdNm" name="name14"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nInsArea" name="name15"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nBuldgGrodFlct" name="name16"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nBuldgUndgFlct" name="name17"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sObjctGrodUndgFlagCd"
            				name="name18" dataType="text">
            			</w2:column>
            			<w2:column id="nObjctRelvFlct" name="name19"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sSpclBuldgFlagCd" name="name20"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sSpclBuldgNo" name="name21"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sSpclBuldgTypeCd" name="name22"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sEmplSubCvrgeInsYn" name="name23"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sEqmtOwnRprtnBntpCd"
            				name="name24" dataType="text">
            			</w2:column>
            			<w2:column id="sEqmtScal" name="name25"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sSchlMngrRprtnBntpCd"
            				name="name26" dataType="text">
            			</w2:column>
            			<w2:column id="nStuNum" name="name27"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sParkEqmtFlagCd" name="name28"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nPrkLtArea" name="name29"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nParkAvaCarNum" name="name30"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nPrkLtMachNum" name="name31"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sFoodRprtnBntpCd" name="name32"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nBfyySaleAmt" name="name33"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sGasRprtnBntpCd" name="name34"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sGasRprtnAreaFlagCd"
            				name="name35" dataType="text">
            			</w2:column>
            			<w2:column id="sGasEqmtCpctFlagCd" name="name36"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sCityGasUseFlagCd" name="name37"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sGasEqmtUndgLctnYn" name="name38"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sAgreRestTermCd" name="name39"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sOwnrFlagCd" name="name40"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sOwnrDscrNo" name="name41"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sOwnrNm" name="name42"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sCrtorReln" name="name43"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sAccptPlac" name="name44"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sPaymTermCd" name="name45"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nRealPaymTerm" name="name46"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInsurTermCd" name="name47"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nRealInsurTerm" name="name48"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInsrdObjctStatCd" name="name49"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInsurStrtdate" name="name50"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInsurEndDate" name="name51"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sCnclExtnEndDate" name="name52"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sApplPlanCd" name="name53"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sApplPlanName" name="name54"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInptDler" name="name55"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInptDlerIP" name="name56"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInptDate" name="name57"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInptHms" name="name58"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sMdfcDler" name="name59"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sMdfcDlerIP" name="name60"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sMdfcDate" name="name61"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sMdfcHms" name="name62"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nGrntPrem" name="name63"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sel1" name="name64"
            				dataType="text">
            			</w2:column>
            		</w2:columnInfo>
            	</w2:dataList>

            	<!--                <w2:dataList baseNode="list" id="Ds_BntpCd" repeatNode="map"/>-->
            	<w2:dataList baseNode="list" id="DsWs_BntpCd"
            		repeatNode="map"
            		userData2="//*/vector/data/LTIBB01RprtnBntpCd" />

            	<w2:dataList baseNode="list" id="DsWs_Warning"
            		keyNode="//*/WARNING" repeatNode="map">
            	</w2:dataList>
            	<w2:dataList id="Ds_BntpCd" baseNode="list"
            		saveRemovedData="true" repeatNode="map">
            		<w2:columnInfo>
            			<w2:column id="LTIBB01RprtnBntpCd" name="name1"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sBntpExpln1" name="name2"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sBntpExpln2" name="name3"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sBntpLargClsfCd" name="name4"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sUdrtkStndCont1" name="name5"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sBntpCd" name="name6"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sBntpDurnClsfCd" name="name7"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sUdrtkStndCont2" name="name8"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sBntpCdName" name="name9"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sBntpEqmtUnit" name="name10"
            				dataType="text">
            			</w2:column>
            		</w2:columnInfo>
            	</w2:dataList>
            </w2:dataCollection>
            <w2:workflowCollection/>
        </xf:model>
        
  		<!--// js Script include //-->  
		<script src="/cm/js/convertJs/Global_Script.js"/>
		<script src="/cm/js/convertJs/comm_Webservice.js"/> 
	 	<script src="/cm/js/convertJs/LongTerm_Script.js"/>
	 	
        <script><![CDATA[
  /****************************************************************************
 * 프로그램번호   : B632_Pop
 * 프로그램명     : 시설소유(관리)자 특약상세입력
 * 파일명         : B632_Pop.xml
 * 프로그램 내용  : 시설소유(관리)자 특약상세입력
 * 관련 프로그램  : 
 * 작성자         : coolys
 * 작성일         : 2013-06-04
 * 저작권         : Copyright ⓒ 2004. the K 손해보험㈜. All Right Reserved.
 * 변경내역       : 
 ****************************************************************************/
 
var applyEnable = "N";  // 설계상태(인수완료)-적용버튼(비활성화)   
var parent_Ds_Prprt = "";		// 부모창 목적물 정보 Ds Set  
var sToday = ""; // 현재일자(서버일자)
 
//---------------------------------------------------------------------------
// function 명 : FORM_OnLoadCompleted(obj)
// 내용        : FORM OnLoad
//---------------------------------------------------------------------------
scwin.init = function() { 
	//console.log("[/CBSC118P.xml] [init()] ==> [폼 로딩] [TEST_01]" );
	
	pro = pro.then(function(rv) {
		return util.winTopShowModalPromise();
	});

	pro = pro.then(function(rv) {
		// init 부분 함수 입력하는곳  // =================================================>
		
		var indata = $w.getParameter("param");
		var inJSON = JSON.parse(indata); 	// 부모창에서 받아온 값( 예) inJSON.sMyPlan)
	 
		if (!util.isNull(inJSON.applyEnable)) 	applyEnable = inJSON.applyEnable;	 // 설계상태(인수완료)-적용버튼(비활성화)   
		
		var pObj = wprom.getParamObject();  
		parent_Ds_Prprt = pObj.Ds_Prprt;	// 부모창 목적물 정보 Ds Set 
	   
		if (applyEnable == "Y")  btn_apply.setDisabled(false);
		//console.log("[/CBSC116P.xml] [init()] ==> [폼 로딩] ==> [적용버튼(비활성화)]"+ applyEnable );    	

		sToday = WebSquare.date.getCurrentServerDate("yyyyMMdd"); 		// global 현재일자

		// DataSet 초기화
		scwin.lfn_initDataset();

		// 업종 조회(03:시설소유배상업종코드)
		scwin.lfn_getEqmtOwnRprtnBntpCdTask();  
		//console.log("[/CBSC118P.xml] [init()] ==> [시설규모_01]"+ Ds_Prprt_Appl.getCellData(0, "sEqmtScal") +"[시설규모_mke_EqmtScal]"+ mke_EqmtScal.getValue()  );
	  
		//mke_EqmtScal.setValue(Ds_Prprt_Appl.getCellData(0, "sEqmtScal")); 		// 시설규모 input box 셋팅 
			
		return ;		// init 함수를 종료하고자 할때 사용
		// return Promise.reject("오류관련처리"); // =================================================>
	});

	pro = pro.then(function(rv) {
		util.winTopHideModal();
	});
	
	//pro = pro.catch(function(rj) {
		//util.winTopHideModal();
		//alert(rj); //Promise reject 시 처리 "오류관련처리" 값출력
	//});
	 
	return pro; 
	 
	//console.log("[/CBSC118P.xml] [init()] ==> [폼 로딩] [TEST_end]" );   
};

//---------------------------------------------------------------------------
// function 명 : btn_search_OnClick(obj)
// 내용        : Dataset ClearData
//---------------------------------------------------------------------------
scwin.lfn_initDataset = function() {
	//console.log("[/CBSC118P.xml] [lfn_initDataset()] ==> [DataSet 초기화] [TEST_01]" );
 
	wconv.copy(Ds_Prprt_Appl, parent_Ds_Prprt);	 // 피보험목적물 Dataset Copy(Ds_Prprt_Appl 데이타 생성됨)
 	
 	util.setRowPosition(Ds_Prprt_Appl, Ds_Prprt_Appl.getRowPosition());	// datalist 포지션 변경(gridView 자동 연동) 
  	//console.log("[/CBSC118P.xml] [lfn_initDataset()] ==> [Ds_Prprt_Appl_갯수]"+ Ds_Prprt_Appl.getRowCount() +"[Ds_Prprt_Appl]"+ WebSquare.xml.serialize(Ds_Prprt_Appl.getAllXML()) ); 
 	
 	Ds_Prprt_Appl.setRowPosition(0);	 // Row 위치 0번째로 지정 
 	
	//console.log("[/CBSC118P.xml] [lfn_initDataset()] ==> [DataSet 초기화] [TEST_end]" );   
};
 
//---------------------------------------------------------------------------
// function 명 : btn_Close_OnClick(obj)
// 내용        : 닫기 OnClick
//---------------------------------------------------------------------------
scwin.btn_Close_OnClick = function(obj) {
    //wconv.close();
    wprom.close("");
};

//---------------------------------------------------------------------------
// function 명 : btn_apply_OnClick(obj)
// 내용        : 적용 OnClick
//---------------------------------------------------------------------------
scwin.btn_apply_OnClick = function(obj) {
 	//console.log("[/CBSC118P.xml] [btn_apply_OnClick()] ==> [적용] [TEST_01]" );
 
	if (Ds_Prprt_Appl.getRowCount() < 0) {
    //if (Ds_Prprt_Appl.getFocusedRowIndex() < 0) {
        wprom.alert("목적물이 입력되지 않았습니다!");
        return;
    }
    if (wconv.trim(Ds_Prprt_Appl.getCellData(Ds_Prprt_Appl.getRowPosition(), "sEqmtOwnRprtnBntpCd")) == null) {
        wprom.alert("시설소유배상업종을 입력하세요!");
        return;
    }
    if (wconv.trim(mke_EqmtScal.getValue()) == null || wconv.trim(mke_EqmtScal.getValue()) == "") {
        wprom.alert("시설규모를 입력하세요!");
        mke_EqmtScal.focus();
        return;
    }
 
    //Ds_Prprt_Appl.setCellData(0, "sEqmtScal", mke_EqmtScal.getValue());  	// 시설규모 셋팅
   // console.log("[/CBSC118P.xml] [btn_apply_OnClick()] ==> [적용] [TEST_03]" );
 
    wconv.copy(parent_Ds_Prprt, Ds_Prprt_Appl);	  // 보험 목적물 적용 정보 Ds(Ds_Prprt_Appl)을 parent_Ds_Prprt에 복사 
    parent_Ds_Prprt.setRowPosition(Ds_Prprt_Appl.getRowPosition());	 // Row 위치 Ds_Prprt_Appl.getRowPosition() 번째로 지정 
 	//console.log("[/CBSC118P.xml] [btn_apply_OnClick()] ==> [적용] [parent_Ds_Prprt, 조회수]"+ parent_Ds_Prprt.getRowCount() +"[parent_Ds_Prprt]"+ WebSquare.xml.serialize(parent_Ds_Prprt.getAllXML()) );
	
    wprom.close("");	 // 창닫기
};
//---------------------------------------------------------------------------
// function 명 : btn_EqmtOwnRprtnBntpCd_OnClick(obj)
// 내용        : 시설소유배상업종코드 팝업 OnClick
//---------------------------------------------------------------------------
scwin.btn_EqmtOwnRprtnBntpCd_OnClick = function(obj) {

   scwin.lfn_dialogB650_Pop();
};

//---------------------------------------------------------------------------
// function 명 : lfn_dialogB650_Pop
// 내용        :  시설소유배상업종코드 Popup
//---------------------------------------------------------------------------
scwin.lfn_dialogB650_Pop = function() {
	//console.log("[/CBSC118P.xml] [lfn_dialogB650_Pop()] ==> [시설소유배상업종코드 Popup] [TEST_01]" );
		
	var promise = Promise.resolve();   // Promise 설정
			
    promise = promise.then(function(rtnVal) { 
     	 //팝업창으로 보낼 자료(Parameter)
		var indata  = {};
	
		var popInfo = {
		 	"width"     : 720,      	// 수정(width, height): 2017.11.04, by 진태만   --> 692, 528,
			"height"    : 555,
			"top"       : 0,
			"left"      : 0,
			"indata"    : indata,		 //indata
			"callback"  : "",
			"title"     : "시설소유자배상업종코드조회"
		};
		return wprom.popupOpen("/ui/cbso/CBSO049P.xml", popInfo);		// 시설소유자배상업종코드조회[B650_Pop] 팝업 처리
    });	 // end of promise()
    
    promise = promise.then(function(rst) { 
 		//console.log("[/CBSC118P.xml] [lfn_dialogB650_Pop()] ==> [시설소유배상업종코드 Popup] [TEST_07] [rst]"+ rst );
    	
        if (wconv.length(rst) != 0) {  
	 		// 구조급수,기둥형태,외벽형태,지붕형태 설정
	        if (rst != null && rst != "" && rst != 0) {
	          //  Ds_Prprt_Appl.setCellData(Ds_Prprt_Appl.getRowPosition(), "nInsArea", rst[0]);
	            
	            Ds_Prprt_Appl.setCellData(Ds_Prprt_Appl.getRowPosition(), "sEqmtOwnRprtnBntpCd", rst[0]); // 시설소유배상업종코드
	            edt_EqmtOwnRprtnBntpCdName.setValue(rst[1]); // 시설소유배상업종명
	            stc_BntpEqmtUnit.setValue(rst[2]); // 업종시설단위
	        } 
        }
    });	 // end of promise() 
};
 
//---------------------------------------------------------------------------
// function 명 : lfn_getEqmtOwnRprtnBntpCdTask
// 내용        : 업종 조회(03:시설소유배상업종코드)
// param       : sStndDate = 기준일자
//             : sBntpLargClsfCd = 업종대분류코드
//             : sBntpLargClsfCd = 업종대분류코드
//---------------------------------------------------------------------------
scwin.lfn_getEqmtOwnRprtnBntpCdTask = function() {
    //console.log("[/CBSC118P.xml] [lfn_getEqmtOwnRprtnBntpCdTask()] ==> [업종 조회] [TEST_01]" );
 
	wconv.clear(Ds_BntpCd);	 // DataSet 초기화
  
	var sBntpLargClsfCd = "99"; 	// 업종대분류코드
    var sBntpDurnClsfCd = "99"; 	// 업종중분류코드
    var sBntpCd = Ds_Prprt_Appl.getCellData(Ds_Prprt_Appl.getRowPosition(), "sEqmtOwnRprtnBntpCd"); // 시설소유배상업종코드
   
    if (wconv.trim(sBntpCd) == null)	  // 시설소유배상업종코드 미존재시 조회 안함.
        return;
        
    var MethodObj = new callService("com.inswave.longterm.ssr.pln.task.DBB650Task", "getEqmtOwnRprtnBntpCd");  	// 01. 업종 조회 Obj 
	MethodObj.setId("getEqmtOwnRprtnBntpCd");		// ID 셋팅
	MethodObj.setParam("sBntpFlagCd", "03");		// Param 셋팅 
	MethodObj.setParam("methodName", "selectExtraObjType");		// Param 셋팅 (업종구분코드(시설소유배상업종))
	MethodObj.setParam("sStndDate", wconv.trim(sToday)); 			 // Param 셋팅(기준일자) 
	MethodObj.setParam("sBntpLargClsfCd", sBntpLargClsfCd);		// Param 셋팅(업종대분류코드)
	MethodObj.setParam("sBntpDurnClsfCd", sBntpDurnClsfCd); 		// Param 셋팅(업종중분류코드)
	MethodObj.setParam("sBntpCd", wconv.trim(sBntpCd));				// Param 셋팅(검색업종코드)
	MethodObj.setUrl("/contract/CBSC118PController.do");  		// 서버단 호출 URL
	MethodObj.setXPath("//*/vector/data/LTIBB01RprtnBntpCd");		// XPath 
	MethodObj.addXPath("//*/vector/data/GENMB11");			// XPath 
	MethodObj.addXPath("//*/WARNING");		// XPath
	MethodObj.sync();		// 동기 처리[기본(async:비동기)]
	MethodObj.send();		// 최종 전송 
	//console.log("[/CBSC056P.xml] [lfn_getEqmtOwnRprtnBntpCdTask()] ==> [01. 특수물건유형, 전송_완료] [TEST_91]");  
 	
	///util.interfaceKey(_tranSync.result.serviceDs); 		// interface 조회 후 Data 리스트 Display
 
	Ds_BntpCd.setJSON(_tranSync.getDsJson("LTIBB01RprtnBntpCd"));		// DS 셋팅(조회 결과) 
	//Ds_Warning.setJSON(_tranSync.getDsJson("WARNING"));  	// Warning DS 셋팅(조회 결과)   
	//console.log("[/CBSC056P.xml] [lfn_getEqmtOwnRprtnBntpCdTask()] ==> [Ds_BntpCd DS_갯수]"+ Ds_BntpCd.getRowCount() +"[Ds_BntpCd]"+ WebSquare.xml.serialize(Ds_BntpCd.getAllXML()) ); 
  
    edt_EqmtOwnRprtnBntpCdName.setValue(Ds_BntpCd.getCellData(0, "sBntpCdName")); // 시설소유배상업종명
    stc_BntpEqmtUnit.setValue(Ds_BntpCd.getCellData(0, "sBntpEqmtUnit")); // 업종시설단위
};
 ]]></script>
    </head>
    <body>
        <xf:group class="cont_wrap layer" id="B632_Pop"
            style="position:absolute; WorkArea:true;  Ver:1.0;  PidAttrib:7;  /*height:245px;*/ left:0px; top:0px;/* width:416px;"
            userData1="특약상세입력[B632_Pop]" userData2=" OnLoadCompleted:scwin.B632_OnLoadCompleted; ">
            <DataObjects>
                <DataObject/>
                <DataObject/>
            </DataObjects>
            <ServiceObjects>
                <ServiceObject/>
                <ServiceObject/>
            </ServiceObjects>
            <xf:group arcsize="8" class="sty_area_form" id="Shape0"
                style="position:absolute;height:26px;width:437px;left:0px;right:410px;top:30px;" userData3="Rectangle"/>
            <xf:group arcsize="8" class="sty_area_form" id="Shape2"
                style="position:absolute;height:51px;width:437px;bottom:95px;left:0px;right:410px;top:67px;" userData3="Rectangle">
                <xf:group class="form_w_line" id="" style="top:24px;" />
            </xf:group>
            <w2:textbox id="Static5" label="특약상세입력" style="position:absolute; VAlign:Middle;  height:20px; left:0px; top:0px; " tagname="" class="sub_pop_title01">
</w2:textbox>
            
            <w2:textbox class="sty_lb_Detail" id="Static1" label=" 시설소유(관리)자 배상책임"
                style="position:absolute; WordWrap:TRUE;  VAlign:Middle;  background-color:user22;  height:22px;left:126px;top:33px; width:297px;" tagname=""/>
            <xf:trigger class="detail_search" ev:onclick="scwin.btn_EqmtOwnRprtnBntpCd_OnClick" id="btn_EqmtOwnRprtnBntpCd"
                style="position:absolute; ImageID:btn_Input_Search;  height:18px;left:403px;top:70px; width:18px;" tabIndex="2" type="anchor"/>
            <w2:textbox class="sty_lb_Basic" id="Static17" label="시설소유배상업종"
                style="position:absolute; VAlign:Middle;  height:24px;left:0px;top:67px; width:104px;" tagname=""/>
            <w2:textbox class="sty_lb_Basic" id="Static15" label="시설규모"
                style="position:absolute; VAlign:Middle;  height:24px;left:0px;top:92px; width:104px;" tagname=""/>
            <xf:trigger class="popup_top_btn" disabled="true" ev:onclick="scwin.btn_apply_OnClick" id="btn_apply"
                style="position:absolute;ImageID:btn_Input_02;height:20px;width:25px;left:337px;top:0px;" tabIndex="4" type="anchor">
                <xf:label><![CDATA[적용]]></xf:label>
            </xf:trigger>
            <xf:trigger class="popup_top_btn" ev:onclick="scwin.btn_Close_OnClick" id="btn_Close"
                style="position:absolute;ImageID:btn_Comm_Close;height:20px;width:25px;left:388px;top:0px;" tabIndex="5" type="anchor">
                <xf:label><![CDATA[닫기]]></xf:label>
            </xf:trigger>
            <xf:input class="sty_ipt_form" disabled="true" id="edt_EqmtOwnRprtnBntpCdName" readOnly="TRUE"
                style="position:absolute;height:20px;text-align:CENTER;width:275px;left:126px;top:70px;" tabIndex="1"/>
            <w2:textbox class="sty_lb_Basic" id="Static2" label="특약명"
                style="position:absolute; VAlign:Middle;  height:24px;left:0px;top:30px; width:104px;" tagname=""/>
            <xf:input class="sty_ipt_form" dataType="number" displayFormat="#######.###" id="mke_EqmtScal" maxlength="10"
                ref="data:Ds_Prprt_Appl.sEqmtScal"
                style="position:absolute;
height:20px;
text-align:right;
width:225px;left:126px;top:95px;
;" tabIndex="3"/>
            <w2:textbox id="stc_BntpEqmtUnit" style="position:absolute; VAlign:Middle;  height:20px;left:359px;top:96px; width:61px;" tagname=""/>
        </xf:group>
    </body>
</html>
