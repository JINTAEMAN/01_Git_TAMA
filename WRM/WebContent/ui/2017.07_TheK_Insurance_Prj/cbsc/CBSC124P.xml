<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="/cm/css/all.css" type="text/css"?>
<?xml-stylesheet href="/cm/css/convert.css" type="text/css"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:w2="http://www.inswave.com/websquare" xmlns:xf="http://www.w3.org/2002/xforms">
   	<head>
    <!--  
        ###################################################
         파일명 : CBSC124P.xml
         프로그램명 : 특약상세조회
         설 명 :  특약상세조회
         작성자 : 진태만
         작성일 : 2017.10.02
 
         수정일자            수정자                  수정내용
        ==================================================
        2017.10.02        진태만          최초작성
        ###################################################
     -->
	 <w2:type>DEFAULT</w2:type>
        <w2:buildDate/>
        <w2:buildDate/>
        <xf:model>
            <xf:instance>
                <data/>
            </xf:instance>
            <w2:dataCollection>
            	<w2:dataList baseNode="list" id="DsWs_Warning"
            		repeatNode="map" />
            	<w2:dataList baseNode="list" id="DsWs_LTIDA42"
            		repeatNode="map"
            		userData2="//hashtable/data[@hashkey='lTIDA42ListDoc']/vector/data/LTIDA42" />
            	<w2:dataList baseNode="list" id="DsWs_LTIDA00"
            		repeatNode="map"
            		userData2="//hashtable/data[@hashkey='lTIDA42Doc']/LTIDA00" />
            		
            	<w2:dataList id="Ds_LTIDA42" baseNode="list"
            		saveRemovedData="true" repeatNode="map">
            		<w2:columnInfo>
            			<w2:column id="sMdfcDate" name="name1"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sMdfcDlerIP" name="name2"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInptDate" name="name3"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sMdfcDler" name="name4"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInptHms" name="name5"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sPymStndSpec" name="name6"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sCvrgeCd" name="name7"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sMdfcHms" name="name8"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sApplStrtDate" name="name9"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sCvrgeName" name="name10"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sApplEndDate" name="name11"
            				dataType="text">
            			</w2:column>
            			<w2:column id="nSeqno" name="name12"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInptDlerIP" name="name13"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sInptDler" name="name14"
            				dataType="text">
            			</w2:column>
            		</w2:columnInfo>
            	</w2:dataList>
            	
            	<w2:dataList id="Ds_LTIDA00" baseNode="list"
            		saveRemovedData="true" repeatNode="map">
            		<w2:columnInfo>
            			<w2:column id="sInsurTermName" name="name1"
            				dataType="text">
            			</w2:column>
            			<w2:column id="sPaymTermName" name="name2"
            				dataType="text">
            			</w2:column>
            		</w2:columnInfo>
            	</w2:dataList>
            </w2:dataCollection>
            <w2:workflowCollection/>
        </xf:model>
         
       <!--// js Script include //--> 
		<script src="/cm/js/convertJs/Global_Script.js"/>
		<script src="/cm/js/convertJs/comm_Webservice.js"/>  
 
        <script><![CDATA[

/****************************************************************************
 * 프로그램번호   : B090_Pop
 * 프로그램명     : 특약상세조회
 * 파일명         : B090_Pop.xml
 * 프로그램 내용  : 특약상세내용 조회
 * 관련 프로그램  : 
 * 작성자         : 이은연
 * 작성일         : 2010-01-10
 * 저작권         : Copyright ⓒ 2004. the K 손해보험㈜. All Right Reserved.
 * 변경내역       : 
 ****************************************************************************/
 
var sGdCd;			//상품코드
var sGnrzCd;			//종형코드
var sPlanCd;			//플랜코드
var sTrtyCd;			//특약코드
var sTrtyName;		//특약명
var TrtyHnglAbbName;		//특약명2
var sInsurTermCd;	//보험기간
var sPaymTermCd;	//납입기간
var sSsrtDate;	    //청약일
var args;

//---------------------------------------------------------------------------
// function 명 : init
// 내용        : 폼 로딩 처리
//---------------------------------------------------------------------------
scwin.init = function() {	
	console.log("[/CBSC124P.xml] [init()] ==> [폼 로딩] [TEST_01]" );   
	
	pro = pro.then(function(rv) {
		return util.winTopShowModalPromise();
	});

	pro = pro.then(function(rv) {
		// init 부분 함수 입력하는곳  // =================================================>
		
		var indata = $w.getParameter("param"); 
		//console.log("[/CBSC124P.xml] [init()] ==> [indata]"+ indata );
		
		try {
			args = JSON.parse(indata);		// 부모창에서 받아온 값( 예) args.tab)
		} catch(e) {}
		
		sGdCd = args.sGdCd;	// 상품코드  
		sGnrzCd = args.sGnrzCd;		// 종형코드
		sPlanCd = args.sPlanCd;	// 플랜코드  
		sTrtyCd = args.sTrtyCd;		// 특약코드
		sTrtyName = args.TrtyHnglAbbName;	// 특약명  
		sInsurTermCd = args.sInsurTermCd;		// 보험기간
		sPaymTermCd = args.sPaymTermCd;		// 납입기간  
		sSsrtDate = args.sSsrtDate;		// 계약시작일자 
		
		edt_sTrtyCd.setValue(args.sTrtyCd);		// 특약코드
		edt_sTrtyName.setValue(args.TrtyHnglAbbName);	// 특약명  
		
		sInsurTermCd = args.sInsurTermCd;	// 보험기간
		sPaymTermCd = args.sPaymTermCd;	// 납입기간  
		//console.log("[/CBSC124P.xml] [sGdCd]"+ sGdCd +"[sGnrzCd]"+ sGnrzCd +"[sPlanCd]"+ sPlanCd +"[특약코드]"+ sTrtyCd +"[sTrtyName]"+ sTrtyName 
		//			+"[sInsurTermCd]"+ sInsurTermCd +"[sPaymTermCd]"+ sPaymTermCd +"[sSsrtDate]"+ sSsrtDate );
		 
	// TEST 데이타 셋팅 @@@ ===> 
	//	sGdCd = "2311";	// 상품코드  
	//	sGnrzCd = "01";		// 종형코드
	//	sPlanCd = "01";	// 플랜코드  
	//	sTrtyCd = "23110001";		// 특약코드
	//	TrtyHnglAbbName = "자동차사고부상치료비I(운전자)";	// 특약명  
	//	sInsurTermCd = "120";		// 보험기간
	//	sPaymTermCd = "120";	// 납입기간  
	//	sSsrtDate = "20170911";		// 계약시작일자 
		
		scwin.lfn_SearchData();	// 조회
 		
		return ;		// init 함수를 종료하고자 할때 사용
		// return Promise.reject("오류관련처리"); // =================================================>
	});

	pro = pro.then(function(rv) {
		util.winTopHideModal();
	});
	
	//pro = pro.catch(function(rj) {
		//util.winTopHideModal();
		//alert(rj); //Promise reject 시 처리 "오류관련처리" 값출력
	//});
	 
	return pro; 
	//console.log("[/CBSC124P.xml] [init()] ==> [폼 로딩] [TEST_end]" );   
};
 
//---------------------------------------------------------------------------
// function 명 : slfn_Search)
// 내용        : 조회버튼 클릭시 처리
//---------------------------------------------------------------------------
scwin.lfn_SearchData = function() {

	//console.log("[/CBSC124P.xml] [lfn_SearchData()] ==> [조회 처리] [TEST_01]" );
	
	var MethodObj = new callService("com.inswave.longterm.ssr.pln.task.DBB090Task", "getPymStndSpecList");	// 개인청약사항조회 Obj
 	MethodObj.setId("getPymStndSpecList");	// ID 셋팅  
	MethodObj.setParam("sGdCd", sGdCd);		// Param 셋팅(상품코드) 
	MethodObj.setParam("sGnrzCd", sGnrzCd);		// Param 셋팅(종형코드) 
	MethodObj.setParam("sPlanCd", sPlanCd);		// Param 셋팅(플랜코드) 
	MethodObj.setParam("sTrtyCd", sTrtyCd);		// Param 셋팅(특약코드) 
	MethodObj.setParam("sInsurTermCd", sInsurTermCd);		// Param 셋팅(보험기간) 
	MethodObj.setParam("sPaymTermCd", sPaymTermCd);		// Param 셋팅(납입기간) 
	MethodObj.setParam("sSsrtDate", sSsrtDate);		// Param 셋팅(약일자(계약시작일자)) 
	MethodObj.setUrl("/contract/CBSC124PController.do");  // 서버단 호출 URL  
	MethodObj.setXPath("//hashtable/data[@hashkey='lTIDA42ListDoc']/vector/data/LTIDA42");			// XPath
	MethodObj.addXPath("//hashtable/data[@hashkey='lTIDA42Doc']/LTIDA00");		// XPath 
	MethodObj.addXPath("//*/WARNING");		// XPath
	MethodObj.sync();		// 동기 처리[기본(async:비동기)]
	MethodObj.send();		// 최종 전송 
 	//console.log("[/CBSC124P.xml] [lfn_SearchData()] ==> [01. 개인청약사항조회, 전송_완료] [TEST_91]")
	 
	//util.interfaceKey(_tranSync.result.serviceDs); 		// interface 조회 후 Data 리스트 Display
	 
	Ds_LTIDA42.setJSON(_tranSync.getDsJson("LTIDA42"));	// 조회 DS 셋팅(조회 결과)  
	Ds_LTIDA00.setJSON(_tranSync.getDsJson("LTIDA00")); 	// 조회 전체 건수 DS 셋팅(조회 결과)   
 	DsWs_Warning.setJSON(_tranSync.getDsJson("WARNING"));  	// Warning DS 셋팅(조회 결과)    
	//console.log("[/CBSC124P.xml] [lfn_SearchData()] ==> [Ds_LTIDA42_갯수]"+ Ds_LTIDA42.getRowCount() +"[Ds_LTIDA42]"+ WebSquare.xml.serialize(DsWs_LTIDA42.getAllXML()) );  
	//console.log("[/CBSC124P.xml] [lfn_SearchData()] ==> [Ds_LTIDA00_갯수]"+ Ds_LTIDA00.getRowCount() +"[Ds_LTIDA00]"+ WebSquare.xml.serialize(Ds_LTIDA00.getAllXML()) );  
 
  	if (DsWs_Warning.getRowCount() != 0) {
        wprom.alert(DsWs_Warning.getCellData(0, "msg"));
        return;
    }
    
    if (Ds_LTIDA42.getRowCount() == 0) {
        wprom.alert("특약상세조회 사항이 없습니다.");		
    } else {	
		edt_sInsurTerm.setValue(Ds_LTIDA00.getCellData(0, "sInsurTermName"));
        edt_sPaymTerm.setValue(Ds_LTIDA00.getCellData(0, "sPaymTermName"));
		//console.log("[/CBSC124P.xml] [lfn_SearchData()] ==> [Ds_LTIDA00.sPaymTermName]"+ Ds_LTIDA00.getCellData(0, "sPaymTermName") ); 
	}
	
	//console.log("[/CBSC124P.xml] [lfn_SearchData()] ==> [TEST_end]" ); 
};

//---------------------------------------------------------------------------
// function 명 : lfn_OnClose()
// 내용        : 닫기
//---------------------------------------------------------------------------
scwin.lfn_OnClose = function() { 
    wprom.close("");
};
]]></script>

	<style type="text/css">
		<![CDATA[ 
			/* header 영역 스타일 */
			thead tr td nobr {
				word-wrap: break-word;
				white-space: normal;
				padding:0px;
			} 
			
			/* body 영역 스타일 */
			tbody tr td nobr {
				word-wrap: break-word ! important;
				white-space: normal ! important;
				padding:0px ! important;
			} 
	]]></style>
		
    </head>
    <body>
        <xf:group class="cont_wrap layer" id="B090_Pop"
            style="position:absolute; WorkArea:true;  Ver:1.0;  PidAttrib:7;  /*height:391px;*/ left:0px; top:0px;/* width:736px;"
            userData1="특약상세조건[B090_Pop]" userData2=" OnLoadCompleted:scwin.B090_Pop_OnLoadCompleted; ">
            <DataObjects>
                <DataObject/>
            </DataObjects>
            <ServiceObjects>
                <ServiceObject/>
            </ServiceObjects>
            <w2:textbox id="st_tit_1" label="특약상세조건" style="position:absolute; VAlign:Middle;  height:20px; left:0px; top:0px; " tagname="" class="sub_pop_title01"></w2:textbox>
            
            <xf:group arcsize="8" class="sty_area_form" id="Shape1"
                style="position:absolute; right:728px;  bottom:69px; height:51px;left:0px;top:30px; width:720px;" userData3="Rectangle">
            	<xf:group class="form_w_line" id="" style="top:24px;"></xf:group>    
            </xf:group>
            <w2:textbox class="sty_lb_Basic" id="Static1" label="특약코드"
                style="position:absolute;height:24px;border-style:solid;left:0px;VAlign:Middle;top:30px;" tagname=""/>
            <xf:input class="sty_ipt_form" disabled="true" id="edt_sTrtyCd" maxByteLength="40"
                style="position:absolute;height:20px;width:141px;ImeMode:native;border-style:solid;left:107px;top:33px;" tabIndex="5"/>
            <w2:textbox class="sty_lb_Basic" id="Static2" label="특약명"
                style="position:absolute;height:24px;border-style:solid;left:258px;VAlign:Middle;top:30px;" tagname=""/>
            <w2:textbox class="sty_lb_Basic" id="Static3" label="보험기간"
                style="position:absolute;height:24px;border-style:solid;left:0px;VAlign:Middle;top:55px;" tagname=""/>
            <xf:input class="sty_ipt_form" disabled="true" ev:onchange="scwin.Edit0_OnChanged" id="edt_sTrtyName" maxByteLength="40"
                style="position:absolute;height:20px;width:343px;ImeMode:native;border-style:solid;left:366px;top:33px;" tabIndex="8"/>
            <xf:trigger class="popup_top_btn" ev:onclick="scwin.lfn_OnClose" id="btn_close" style="position:absolute;ImageID:btn_Comm_Close;height:20px;width:25px;left:671px;top:0px;" tabIndex="3" type="anchor">
				<xf:label><![CDATA[닫기]]></xf:label>
			</xf:trigger>
			            
            <xf:input class="sty_ipt_form" disabled="true" id="edt_sInsurTerm" maxByteLength="40"
                style="position:absolute;height:20px;width:141px;ImeMode:native;border-style:solid;left:107px;top:58px;" tabIndex="11"/>
            <w2:textbox class="sty_lb_Basic" id="Static4" label="납입기간"
                style="position:absolute;height:24px;border-style:solid;left:258px;VAlign:Middle;top:55px;" tagname=""/>
            <xf:input class="sty_ipt_form" disabled="true" ev:onchange="scwin.edt_sInsurTerm_OnChanged" id="edt_sPaymTerm"
                maxByteLength="40"
                style="position:absolute;height:20px;width:343px;ImeMode:native;border-style:solid;left:366px;top:58px;" tabIndex="13"/>
            <xf:switch id="switch_122" style=" ">
                <xf:case id="Default_123" style=" ">
                    <w2:gridView autoFit="allColumn" autoFitMinWidth="100" class="sty_Grid" dataList="Ds_LTIDA42"
                        ev:oncellclick="scwin.Grd_Goods_OnCellClick" focusMode="row" id="Grd_Goods" inputType="text" readOnly="true"
                        style="position:absolute; UseDBuff:true;  InputPanel:FALSE;  FillArea:TRUE;  EndLineColor:default;  border:Flat;  AutoFitEndLine:Hide;  height:277px; left:0px; right:728px;top:95px; width:720px;" tabIndex="14">
                        <w2:header>
                            <w2:row>
                                <w2:column dataType="text" id="head_id_1015" inputType="text" readOnly="true" style="height:30px;"
                                    userData1="0" userData3="0" value="담보명" width="214"/>
                                <w2:column dataType="text" id="head_id_1016" inputType="text" readOnly="true" style="height:30px;"
                                    userData1="1" userData3="0" value="지급기준내역" width="502"/>
                            </w2:row>
                        </w2:header>
                        <w2:gBody>
                            <w2:row>
                                <w2:column colMerge="true" dataType="text" id="sCvrgeName" inputType="text" readOnly="true"
                                    style="height:27px;" userData1="0" userData3="0" width="214"/>
                                <w2:column dataType="text" id="sPymStndSpec" inputType="text" readOnly="true" style="" userData1="1"
                                    userData3="0" width="502"/>
                            </w2:row>
                        </w2:gBody>
                    </w2:gridView>
                </xf:case>
            </xf:switch>
        </xf:group>
    </body>
</html>
